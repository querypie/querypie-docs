---
title: 'Reports'
---

import { Callout } from 'nextra/components'

# Reports

<Callout type="important">
11.2.0 현재 Reports 기능은 Beta 버전으로 제공 중입니다.
</Callout>

### Overview

QueryPie 보고서는 감사 대응에 필요한 데이터를 보고서 형태로 출력하는 기능입니다.

사용자 및 관리자 현황 및 내역, 보안 설정 내역, DB/서버에 주어진 사용자별 권한 현황 및 이력, DB/서버 접속 및 쿼리/명령어 사용 내역 등을 출력할 수 있습니다.

<Callout type="info">
11.2.0 버전 현재 보고서는 영어로만 출력 가능합니다.
</Callout>

### 보고서 출력 항목 및 필터 지원 사항

11.2.0 버전 현재 지원하는 보고서 항목 및 필터는 아래의 표를 참고하시기 바랍니다.

<table data-table-width="958" data-layout="center" local-id="cfcbf091-3775-4454-bff4-924bf43e88f4">
<a id="table-1"></a>
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**보고서 유형**
</th>
<th>
**대분류**
</th>
<th>
**소분류**
</th>
<th>
**User / Group**
</th>
<th>
**Resource**
</th>
<th>
**기타 필터**
</th>
</tr>
<tr>
<td rowspan="12">
QueryPie System
</td>
<td rowspan="5">
Users
</td>
<td>
User Account Status <br/>사용자 계정 현황
</td>
<td>
O
</td>
<td>
X
</td>
<td>
* User Status
</td>
</tr>
<tr>
<td>
User Account Management History <br/>사용자 계정 관리 이력
</td>
<td>
O
</td>
<td>
X
</td>
<td>
-
</td>
</tr>
<tr>
<td>
User Account Activation History <br/>사용자 계정 활성화/비활성화 이력
</td>
<td>
O
</td>
<td>
X
</td>
<td>
-
</td>
</tr>
<tr>
<td>
Group Status **[added-10.2.2]**<br/>그룹 현황
</td>
<td>
X
</td>
<td>
X
</td>
<td>
-
</td>
</tr>
<tr>
<td>
Group Membership History **[added-10.2.2]**<br/>그룹 멤버 추가/삭제 이력
</td>
<td>
X
</td>
<td>
X
</td>
<td>
-
</td>
</tr>
<tr>
<td rowspan="3">
Administrator
</td>
<td>
Administrator Status <br/>관리자 현황
</td>
<td>
O
</td>
<td>
X
</td>
<td>
-
</td>
</tr>
<tr>
<td>
Admin Role History <br/>관리자 권한 부여/회수 이력
</td>
<td>
O
</td>
<td>
X
</td>
<td>
-
</td>
</tr>
<tr>
<td>
Admin Activity History <br/>관리자 행위 이력
</td>
<td>
O
</td>
<td>
X
</td>
<td>
-
</td>
</tr>
<tr>
<td rowspan="2">
Login
</td>
<td>
User Login History <br/>사용자 로그인 이력
</td>
<td>
O
</td>
<td>
X
</td>
<td>
-
</td>
</tr>
<tr>
<td>
Login IPs by User <br/>사용자 별 로그인 IP 이력
</td>
<td>
O
</td>
<td>
X
</td>
<td>
-
</td>
</tr>
<tr>
<td rowspan="2">
Security Settings
</td>
<td>
Authentication Method <br/>사용자 인증 방식
</td>
<td>
X
</td>
<td>
X
</td>
<td>
-
</td>
</tr>
<tr>
<td>
Security Configuration Stauts **[updated-10.2.2]**<br/>보안 설정 현황
</td>
<td>
X
</td>
<td>
X
</td>
<td>
-
</td>
</tr>
<tr>
<td rowspan="8">
QueryPie DAC
</td>
<td rowspan="2">
Databases **[added-10.2.2]**
</td>
<td>
DB Connection Status<br/>DB 커넥션 현황
</td>
<td>
X
</td>
<td>
O
</td>
<td>
-
</td>
</tr>
<tr>
<td>
DB Connection Management History<br/>DB 커넥션 추가/삭제 이력
</td>
<td>
X
</td>
<td>
O
</td>
<td>
-
</td>
</tr>
<tr>
<td rowspan="2">
DB Access Control
</td>
<td>
DB Access Control - Assigned Status <br/>DB 접근 권한 부여 현황
</td>
<td>
O
</td>
<td>
O
</td>
<td>
-
</td>
</tr>
<tr>
<td>
DB Access Control Logs <br/>DB 접근 권한 부여/회수 이력
</td>
<td>
O
</td>
<td>
O
</td>
<td>
-
</td>
</tr>
<tr>
<td rowspan="2">
DB Access & Queries
</td>
<td>
DB Access History <br/>DB 접근 이력
</td>
<td>
O
</td>
<td>
O
</td>
<td>
* Time Range
</td>
</tr>
<tr>
<td>
Query Execution History <br/>쿼리 실행 이력
</td>
<td>
O
</td>
<td>
O
</td>
<td>
-
</td>
</tr>
<tr>
<td rowspan="2">
Workflow Logs - DB **[added-10.2.2]**
</td>
<td>
DAC Type Requests<br/>Workflow를 통해 진행된 DAC 유형 요청
</td>
<td>
X
</td>
<td>
O
</td>
<td>
-
</td>
</tr>
<tr>
<td>
DAC Unmasking Requests **[added-11.2.0]**
Workflow를 통해 진행된 Unmasking 요청
</td>
<td>
O
</td>
<td>
X
</td>
<td>
-
</td>
</tr>
<tr>
<td rowspan="20">
QueryPie SAC
</td>
<td rowspan="2">
Servers <br/>**[added-10.2.2]**
</td>
<td>
Server Status<br/>서버 현황
</td>
<td>
X
</td>
<td>
O
</td>
<td>
-
</td>
</tr>
<tr>
<td>
Server Management History<br/>서버 추가/삭제/변경 이력
</td>
<td>
X
</td>
<td>
O
</td>
<td>
-
</td>
</tr>
<tr>
<td rowspan="2">
Server Groups **[added-10.2.2]**
</td>
<td>
Server Group Status<br/>서버 그룹 현황
</td>
<td>
X
</td>
<td>
X
</td>
<td>
-
</td>
</tr>
<tr>
<td>
Server Group Management History<br/>서버 그룹 추가/삭제/변경 이력
</td>
<td>
X
</td>
<td>
X
</td>
<td>
-
</td>
</tr>
<tr>
<td rowspan="2">
Server Account & Password **[added-10.2.2]**
</td>
<td>
Provisioned Server Account Status<br/>프로비저닝된 서버 계정 현황
</td>
<td>
X
</td>
<td>
O
</td>
<td>
-
</td>
</tr>
<tr>
<td>
Server Account Provisioning History<br/>서버 계정 프로비저닝 이력
</td>
<td>
X
</td>
<td>
O
</td>
<td>
-
</td>
</tr>
<tr>
<td rowspan="7">
Server Access Control
</td>
<td>
Direct Permission Status by User/Group **[updated-10.2.2]**<br/>사용자/그룹별 Direct Permission 현황
</td>
<td>
O
</td>
<td>
O
</td>
<td>
-
</td>
</tr>
<tr>
<td>
Direct Permission Change History <br/>Direct Permission 변경 이력
</td>
<td>
O
</td>
<td>
O
</td>
<td>
-
</td>
</tr>
<tr>
<td>
*Server Role Status by User* **[deprecated-10.2.2]**<br/> *사용자별 서버 역할 현황*
</td>
<td>
*O*
</td>
<td>
*O*
</td>
<td>
*-*
</td>
</tr>
<tr>
<td>
Role-Granted Users by Role **[added-10.2.2]**<br/>역할별 역할 부여 사용자 현황
</td>
<td>
O
</td>
<td>
X
</td>
<td>
-
</td>
</tr>
<tr>
<td>
Accessible Servers by Role **[added-10.2.2]**<br/>역할별 접근 가능 서버 현황
</td>
<td>
X
</td>
<td>
O
</td>
<td>
-
</td>
</tr>
<tr>
<td>
Server Role & Policy Management History **[added-10.2.2]**<br/>서버 역할 및 정책 변경 이력
</td>
<td>
X
</td>
<td>
X
</td>
<td>
-
</td>
</tr>
<tr>
<td>
Server Role Grant/Revocation History <br/>서버 역할 부여/회수 이력
</td>
<td>
O
</td>
<td>
O
</td>
<td>
-
</td>
</tr>
<tr>
<td rowspan="6">
Server Sessions and Commands
</td>
<td>
Server Access History <br/>서버 접근 이력
</td>
<td>
O
</td>
<td>
O
</td>
<td>
* Time Range
* Result
* Action Type
* Role

</td>
</tr>
<tr>
<td>
Command History <br/>명령어 이력
</td>
<td>
O
</td>
<td>
O
</td>
<td>
* Keyword
</td>
</tr>
<tr>
<td>
Command Template Status <br/>명령어 템플릿 현황
</td>
<td>
X
</td>
<td>
X
</td>
<td>
-
</td>
</tr>
<tr>
<td>
Command Template Management History <br/>명령어 템플릿 관리 이력
</td>
<td>
X
</td>
<td>
X
</td>
<td>
-
</td>
</tr>
<tr>
<td>
Command Whitelist Grant/Revocation History <br/>명령어 일시 허용 권한 부여/회수 이력
</td>
<td>
O
</td>
<td>
O
</td>
<td>
-
</td>
</tr>
<tr>
<td>
Restricted Commands <br/>차단 명령어 이력
</td>
<td>
O
</td>
<td>
O
</td>
<td>
* Keyword

</td>
</tr>
<tr>
<td>
Workflow Logs - Servers <br/>**[added-10.2.2]**
</td>
<td>
SAC Type Requests<br/>SAC 유형 요청
</td>
<td>
X
</td>
<td>
O
</td>
<td>
-
</td>
</tr>
</tbody>
</table>

### 보고서 목록 조회

Audit 메뉴에서 Reports &gt; Reports 메뉴로 진입하면 보고서 생성 태스크 목록을 확인할 수 있습니다.

<Callout type="info">
리포트 메뉴에 접근하기 위해서는 계정에 Report Audit Full Access 관리자 권한이 부여되어야 합니다.
</Callout>


<figure data-layout="center" data-align="center">
![Administrator &gt; Audit &gt; Reports &gt; Reports](/544384417/output/screenshot-20241223-112238.png){width=760 class="mx-auto block"}
<figcaption>
Administrator &gt; Audit &gt; Reports &gt; Reports
</figcaption>
</figure>


1.  **검색**  : Task Name으로 검색이 가능합니다.
2.  **Create Task**  : 리포트 생성 페이지로 진입합니다.
3.  **새로고침**  : 목록을 다시 불러옵니다.
4.  **Type**  : 보고서 생성시 지정한 유형 정보로, 다음의 세 가지가 있습니다.
    1. QueryPie System
    2. QueryPie DAC
    3. QueryPie SAC
5.  **Task Name**  : 보고서 생성 시 입력한 태스크의 이름입니다.
6.  **Scheduling**  : 보고서 생성 시 입력한 태스크의 반복 주기 정보로, 다음과 같은 값을 가질 수 있습니다.
    1. None : 반복 없음 (일회성으로 생성)
    2. Daily : 매일 반복
    3. Weekly : 매주 반복
    4. Monthly : 매 월 반복
    5. Quarterly : 매 분기 반복
7.  **Created By**  : 보고서 생성 태스크를 만든 사람의 정보입니다.
8.  **Created At**  : 보고서 생성 태스크를 만든 시점입니다.
9.  **Last Task At**  : 마지막으로 보고서가 생성된 시점입니다. (생성된 적이 없을 경우 비어 있음)
10.  **Last Task Status**  : 마지막 보고서 생성 태스크의 상태입니다. 다음과 같은 값을 가집니다.
    1. Succeeded : 성공
    2. In Progress : 진행 중
    3. Failed : 실패
11.  **Last Report File**  : 버튼을 클릭하면, 마지막으로 생성된 보고서 파일을 다운로드 받을 수 있습니다.
    1. 생성된 파일이 없거나, 이미 만료된 경우 비활성화 처리됩니다.
    2. 파일 다운로드 시 비밀번호 지정 여부는 Security 설정에서 지정할 수 있습니다.
    3. 비밀번호 지정 활성화 시, 파일을 다운로드 할 때 비밀번호를 설정합니다. 이후 파일의 압축을 해제할 때 설정한 비밀번호를 입력해야 합니다.

### 보고서 상세 조회하기

보고서 목록에서 상세 내용을 조회하고자 하는 항목을 선택하면 Drawer가 열리고, 상세 정보를 확인할 수 있습니다.


<figure data-layout="center" data-align="center">
![Administrator &gt; Audit &gt; Reports &gt; Reports &gt; Report Detail](/544384417/output/screenshot-20241223-112524.png){width=760 class="mx-auto block"}
<figcaption>
Administrator &gt; Audit &gt; Reports &gt; Reports &gt; Report Detail
</figcaption>
</figure>


1.  **Unschedule Task**  : 반복 생성하는 보고서의 경우, 스케줄링 해제가 가능합니다.
    1. 스케줄이 없거나 이미 해제된 태스크의 버튼은 비활성화되어 있으며, Task Unscheduled로 표시됩니다.
2.  **Type**  : 보고서 유형 정보를 표시합니다. (QueryPie General, DAC, SAC) 
    1. 돋보기 버튼을 클릭하면 선택된 출력 항목 및 필터 정보를 확인할 수 있습니다.
3.  **Scheduling**  : 설정된 반복 주기 정보를 표시합니다. (None, Daily, Weekly, Quarterly)
4.  **Date Range**  : 일회성으로 생성하는 보고서의 경우 기간 범위를 표시합니다.
5.  **Start Date**  : 반복 생성하는 보고서의 경우 태스크 시작일을 표시합니다.
6.  **Next Task At**  : 다음으로 예정된 태스크의 일시를 표시합니다. (반복하지 않는 경우 비워둡니다)
7.  **User Scope**  : 사용자 Scope 정보를 표시합니다.
8.  **Resource Scope**  : 리소스 Scope 정보를 표시합니다.
9.  **Report List 탭**  : 생성된 보고서의 목록을 표시합니다. 
    1. Report No. : 보고서 태스크 내 보고서 일련번호
    2. Created At : 보고서의 생성일시
    3. Expired At : 보고서 파일의 만료(예정)일시
    4. Status : 보고서 태스크의 상태 (Succeeded, Failed 중 하나)
    5. Report File : 파일 다운로드 링크 
        * 생성된 파일이 없거나, 이미 만료된 경우 비활성화 처리됩니다.
        * 파일 다운로드 시 비밀번호 지정 여부는 Security 설정에서 지정할 수 있습니다.
        * 비밀번호 지정 활성화 시, 파일을 다운로드 할 때 비밀번호를 설정합니다. 이후 파일의 압축을 해제할 때 설정한 비밀번호를 입력해야 합니다.
10.  **Action History 탭**  : 보고서에 대한 사용자의 작업 내역을 표시합니다.
    1. Action At : 작업 수행 일시
    2. Action Type : 작업 유형 (Report Download, Report Unschedule 중 하나)
    3. Target Report No. : 대상 리포트 일련번호 (없을 경우 비워져 있음)
    4. Action By : 작업자

### 보고서 생성하기

보고서 목록 화면에서 `+ Create Task` 버튼을 클릭하여 보고서 생성 페이지로 진입합니다.

태스크 이름, 보고서 유형, 스케줄링 관련 내용을 입력하고, 섹션 단위로 보고서 출력 항목 및 적용할 필터를 지정할 수 있습니다. `+ Add Section` 버튼을 클릭하여 섹션을 추가할 수 있습니다.

<figure data-layout="center" data-align="center">
![Administrator &gt; Audit &gt; Reports &gt; Reports &gt; Create](/544384417/output/screenshot-20241209-104337.png){width=760 class="mx-auto block"}
<figcaption>
Administrator &gt; Audit &gt; Reports &gt; Reports &gt; Create
</figcaption>
</figure>

1.  **Task Name**  : 보고서 생성 태스크를 식별할 수 있는 이름을 입력합니다.
2.  **Type**  : 보고서 유형을 선택합니다. (QueryPie General, DAC, SAC)
3.  **Scheduling**  : 보고서 생성 태스크의 반복 주기를 입력합니다.
    1. None : 태스크의 반복 없이 일회성으로 생성할 때 선택합니다.
    2. Daily : 매일 반복 생성하고자 할 때 선택합니다.
    3. Weekly : 매주 반복 생성하고자 할 때 선택합니다.
    4. Monthly : 매 월 반복 생성하고자 할 때 선택합니다.
    5. Quarterly : 매 분기 반복 생성하고자 할 때 선택합니다.
4.  **Date Range**  : 이력 데이터의 기간 범위
    1. `Scheduling`을 `None` 으로 지정한 경우, 이력 데이터의 출력 범위를 지정합니다.
    2. 현황 데이터는 Date Range 입력 값과 무관하게 태스크 실행 시점을 기준으로 출력됩니다.
    3. 제약사항: Date Range는 최대 3개월치의 데이터만 선택할 수 있습니다.
        1.  `10.2.8` 버전 현재, 오늘로부터 최대 3개월 전의 데이터만 선택할 수 있습니다. 이는 `10.2.9` 버전에서 수정될 예정입니다.
5.  **Start Date**  : 반복 태스크의 시작일
    1. `Scheduling`을 `Daily`, `Weekly`, `Monthly`, 또는 `Quarterly` 로 지정한 경우, 태스크 시작일을 지정합니다.
6.  **Data**  : 보고서 출력 항목
    1. 항목 선택 시 하단에서 데이터 기간 범위 정보를 확인할 수 있으며, Scheduling 지정 시 최초로 출력되는 보고서에 적용될 내용을 표시해줍니다.
    2. Reference Time : 현황 데이터에 적용되는 기준 시점 안내
    3. Date Range : 이력 데이터에 적용되는 기간 범위 안내
7.  **Filter**  : 섹션에 적용할 필터 입력
    1. 보고서 출력 항목 선택에 따라 적용 가능한 필터가 표시됩니다.
    2. 하단 필터 항목 참고

원하는 정보를 모두 입력 후 `Preview` 버튼을 클릭 시 출력될 보고서를 미리보기할 수 있습니다.

`Save` 버튼을 클릭하여 보고서 태스크를 저장하고 목록으로 돌아갑니다.

### 보고서 복제하기**[10.2.2]**

<figure data-layout="center" data-align="center">
![Administrator &gt; Audit &gt; Reports &gt; Reports - Duplicate Task](/544384417/output/screenshot-20241223-104529.png){width=589 class="mx-auto block"}
<figcaption>
Administrator &gt; Audit &gt; Reports &gt; Reports - Duplicate Task
</figcaption>
</figure>

복제하려는 보고서를 목록에서 선택한 뒤 :copy: `Duplicate Task` 버튼을 클릭하면, 기존에 생성했던 보고서를 복제하여 새로운 보고서 태스크를 생성할 수 있습니다.

태스크 복제 시에 복제되는 정보는 다음과 같습니다.

*  **Task Name**  - 기존 태스크 이름 뒤에 Copy가 추가됨
*  **Type**  - 기존 태스크에서 선택한 보고서 유형이 유지됨
*  **Scheduling**  - 기존 태스크에서 선택한 반복 주기가 유지됨
    * 단, Date Range 및 Start Date 는 초기화되며, 재입력이 필요함
*  **Data**  - 기존 태스크에서 선택한 출력 항목이 보존됨
*  **Filter**  - Data별로 입력한 필터가 보존됨
    * 단, 기존에 선택한 Role, User, Group이 더 이상 존재하지 않는 경우에는 필터값에서 제거됨

### 필터

보고서에서 지원하는 필터의 상세 스펙을 안내합니다.

1.  **User/Group**  : 보고서 출력 데이터를 사용자 또는 그룹으로 필터링합니다.
    1. 예: PM팀에 대해서 부여된 DB 접근 권한 보고서 출력을 원하는 경우 다음과 같이 선택
        * Type: QueryPie DAC
        * Data: DB Access Control - Assigned Status
        * Filter &gt; User/Group: PM (그룹)
2.  **Resource**  : 보고서 출력 데이터를 리소스에 부여된 태그로 필터링합니다.
    1. 예: `Service:Homepage` 태그가 달린 DB에 대한 접근 권한 보고서 출력을 원하는 경우
        * Type: QueryPie DAC
        * Data: DB Access Control - Assigned Status
        * Filter &gt; Resource: `Service:Homepage`
    2. 태그 연산 로직은 다른 QueryPie 기능과 동일하며, 다음과 같습니다.
        * Key가 동일한 태그 필터를 여러 개 입력하는 경우 OR 조건으로 합쳐집니다.
        * Key가 다른 태그 필터를 여러 개 입력하는 경우 AND 조건으로 합쳐집니다.
    3. Workflow의 경우 한 번에 여러 개의 리소스에 대해 요청이 가능합니다. 이 때 요청 내에 조건을 만족하는 리소스가 한 개 이상 포함되었다면 검색결과에 포함됩니다.
3.  **User Status :** User Account Status 출력 시 User Account의 상태로 필터링합니다.
    1. 필터값: Active, Locked, Expired, Locked Manually
4.  **Time Range**  : DB Access History 또는 Server Access History 선택 시 시간 범위로 필터링합니다.
    1. 시작 시간 및 종료 시간을 입력합니다.
    2. 입력된 시간 범위 내의 결과를 제외할 지 여부를 선택합니다. 선택 시, 입력된 시간 범위 외의 로그만 출력됩니다.
5.  **Result**  : Server Access History 선택 시 결과를 기준으로 필터링합니다.
    1. 필터값: Success, Failure
6.  **Action Type**  : Server Access History 선택 시 행위 유형(Action Type)을 기준으로 필터링합니다.
    1. 필터값: Connect, Disconnect
7.  **Role**  : Server Access History 선택 시 사용한 서버 역할을 기준으로 필터링합니다.
    1. 복수 개의 Role을 입력하는 경우 OR 조건으로 합쳐집니다.
8.  **Keyword**  : Command History 또는 Restricted Commands 선택 시 입력한 커맨드 기준으로 필터링합니다.
    1. 키워드 입력 후 키보드에서 Enter 키를 입력하여 검색 조건을 적용합니다.
    2. 입력한 키워드가 포함된 커맨드 이력만 추출됩니다. (like 검색)
    3. 대소문자를 구분하지 않습니다.
    4. 복수의 키워드를 입력하는 경우 OR 조건으로 합쳐집니다.
