---
title: 'External API Changes (Version 9.10.0)'
---

---

## Previous Version OpenAPI Specification JSON Reference Document (Based on 9.9.5)


:paperclip: [external_9_9_5.json](external_9_9_5.json)
---

## Removed External APIs

* Approval Rule API
    * Create
    * Update
---

## Added External APIs

* Workflow API (Replaces existing Access Approval API and Approval API.)
    * [Access Request] Detail
    * [Access Request] Approve
    * [Access Request] Reject
    * [Export Request] Detail
    * [Export Request] Approve
    * [Export Request] Reject
    * [SQL Request] Detail
    * [SQL Request] Approve
    * [SQL Request] Reject
    * All Requests
* Approval Rule API V2 (Replaces existing Approval Rule API.)
    * List
    * Add approval rule
    * Remove approval rule
    * Detail
    * Edit approval rule
---

## Changed External APIs

* Access Approval API
    * List of Access Approval
* Approval Rule API
    * Detail
* Approval API
    * List of Approval
---

### Access Approval API - List of Access Approval

`GET /api/external/access-approvals`

Request Changes

* The `status` that can be used as a Query Parameter has been changed. `PARTIALLY_APPROVED` has been replaced with `IN_PROGRESS`, and `NONE` has been removed.
    *  **before**  : `"NONE"` `"PENDING"` `"CANCELED"` `"REJECTED"` `"PARTIALLY_APPROVED"` `"APPROVED"` `"EXPIRED"`
    *  **after**  : `"PENDING"` `"CANCELED"` `"REJECTED"` `"IN_PROGRESS"` `"APPROVED"` `"EXPIRED"`

Response Changes

* `currentDegree` has been removed.
* `approvalStatus` has been changed.
    *  **before**  : `"NONE"` `"PENDING"` `"CANCELED"` `"REJECTED"` `"PARTIALLY_APPROVED"` `"APPROVED"` `"EXPIRED"`
    *  **after**  : `"PENDING"` `"CANCELED"` `"REJECTED"` `"IN_PROGRESS"` `"APPROVED"` `"EXPIRED"`
* `updatedUser` has been removed.
* `lines` `uuid` has been removed.
* `lines` `degree` has been replaced with `step`.
* `lines` `approvedAt` has been replaced with `actionAt`.
* `lines` `status` has been changed.
    *  **before**  : `"PENDING"` `"REQUESTED"` `"CANCELED"` `"APPROVED"` `"REJECTED"` `"SQL_EXECUTED"` `"SQL_CANCELED"` `"SQL_SUCCEED"` `"SQL_FAILED"` `"CONFIRMED"`
    *  **after**  : `"NONE"` `"PENDING"` `"CANCELED"` `"APPROVED"` `"REJECTED"` `"EXECUTED"` `"UNREAD"` `"CONFIRMED"`
* `lines` `type` has been changed.
    *  **before**  : `"REPORTER"` `"APPROVER"` `"EXECUTOR"` `"REFERRER"` `"REVIEWER"`
    *  **after :** `"APPROVER"` `"EXECUTOR"` `"REVIEWER"`
* `connections` `clusterGroupDescription` has been removed.
* `connections` `databaseName` has been removed.
* `connections` `schemaName` has been removed.

Response Before Change Example
```
{
  "list": [
    {
      "approvalStatus": "PENDING",
      "connections": [
        {
          "clusterGroupDescription": "Cluster Group description",
          "clusterGroupName": "Cluster Group Name",
          "clusterGroupUuid": "63d2cc6d-dd83-4a31-a817-fc13f1fc57a3",
          "clusterHost": "Cluster Host",
          "clusterReplicationType": "`MASTER`, `SLAVE`, `SINGLE`",
          "clusterUuid": "63d2cc6d-dd83-4a31-a817-fc13f1fc57a3",
          "databaseName": "Database Name",
          "roleName": "Role Name",
          "roleUuid": "63d2cc6d-dd83-4a31-a817-fc13f1fc57a3",
          "schemaName": "Schema Name",
          "uuid": "63d2cc6d-dd83-4a31-a817-fc13f1fc57a3"
        }
      ],
      "createdAt": "2019-08-24T14:15:22Z",
      "createdUser": "User Information",
      "currentDegree": 1,
      "description": "Approval Description",
      "id": 0,
      "lines": [
        {
          "approvedAt": "2019-08-24T14:15:22Z",
          "comment": "comment",
          "degree": 1,
          "status": "APPROVED",
          "type": "APPROVER",
          "userDepartment": "string",
          "userEmail": "string",
          "userLoginId": "string",
          "userName": "string",
          "userType": "USER",
          "userUuid": "string",
          "uuid": "UUID"
        }
      ],
      "title": "Approval Title",
      "type": "ACCESS",
      "updatedAt": "2019-08-24T14:15:22Z",
      "updatedUser": "User Information",
      "uuid": "UUID"
    }
  ],
  "page": {
    "currentPage": 0,
    "pageSize": 0,
    "totalElements": 0,
    "totalPages": 0
  }
}
```

Response After Change Example
```
{
  "list": [
    {
      "approvalStatus": "PENDING",
      "connections": [
        {
          "clusterGroupName": "Cluster Group Name",
          "clusterGroupUuid": "63d2cc6d-dd83-4a31-a817-fc13f1fc57a3",
          "clusterHost": "Cluster Host",
          "clusterReplicationType": "`MASTER`, `SLAVE`, `SINGLE`",
          "clusterUuid": "63d2cc6d-dd83-4a31-a817-fc13f1fc57a3",
          "roleName": "Role Name",
          "roleUuid": "63d2cc6d-dd83-4a31-a817-fc13f1fc57a3",
          "uuid": "63d2cc6d-dd83-4a31-a817-fc13f1fc57a3"
        }
      ],
      "createdAt": "2019-08-24T14:15:22Z",
      "createdUser": "User Information",
      "description": "Approval Description",
      "id": 0,
      "lines": [
        {
          "actionAt": "2019-08-24T14:15:22Z",
          "comment": "comment",
          "status": "APPROVED",
          "step": 1,
          "type": "APPROVER",
          "userDepartment": "string",
          "userEmail": "string",
          "userLoginId": "string",
          "userName": "string",
          "userType": "USER",
          "userUuid": "string"
        }
      ],
      "title": "Approval Title",
      "type": "ACCESS",
      "updatedAt": "2019-08-24T14:15:22Z",
      "uuid": "UUID"
    }
  ],
  "page": {
    "currentPage": 0,
    "pageSize": 0,
    "totalElements": 0,
    "totalPages": 0
  }
}
```


---

### Approval Rule API - Detail

`GET /api/external/approval-rules/{uuid}`

Response Changes

* `approvalCondition` has been removed.
* `executionCondition` has been changed.
    *  **before**  : `"NONE"` `"MANUAL"` `"SELF"` `"CONNECTION_OWNER"` `"ANY"`
    *  **after**  : `"ADMIN_ONLY"` `"ALL_USERS"` `"FIXED"` `"CONNECTION_OWNER"`
* `reviewEnabled` has been removed.
* `urgentMode` has been added.
* `lines` `degree` has been replaced with `step`.
* `lines` `type` has been changed.
    *  **before**  : `"REPORTER"` `"APPROVER"` `"EXECUTOR"` `"REFERRER"` `"REVIEWER"`
    *  **after**  : `"APPROVER"` `"EXECUTOR"` `"REVIEWER"`
* `lines` `resourceType` has been changed.
    *  **before**  : `USER`, `ROLE`
    *  **after**  : `USER`, `GROUP`
* `lines` `uuid` has been removed.

Response Before Change Example
```
{
  "approvalCondition": "MANUAL",
  "createdAt": "2019-08-24T14:15:22Z",
  "executionCondition": "MANUAL",
  "lines": [
    {
      "degree": 1,
      "resourceType": "USER",
      "resourceUuid": "63d2cc6d-dd83-4a31-a817-fc13f1fc57a3",
      "type": "APPROVER",
      "uuid": "63d2cc6d-dd83-4a31-a817-fc13f1fc57a3"
    }
  ],
  "name": "Default Rule",
  "requestType": "SQL",
  "reviewEnabled": true,
  "updatedAt": "2019-08-24T14:15:22Z",
  "uuid": "63d2cc6d-dd83-4a31-a817-fc13f1fc57a3"
}
```

Response After Change Example
```
{
  "createdAt": "2019-08-24T14:15:22Z",
  "executionCondition": "ADMIN_ONLY",
  "lines": [
    {
      "resourceType": "USER",
      "resourceUuid": "63d2cc6d-dd83-4a31-a817-fc13f1fc57a3",
      "step": 1,
      "type": "APPROVER"
    }
  ],
  "name": "Default Rule",
  "requestType": "SQL",
  "updatedAt": "2019-08-24T14:15:22Z",
  "urgentMode": true,
  "uuid": "63d2cc6d-dd83-4a31-a817-fc13f1fc57a3"
}
```


---

### Approval API - List of Approval

`GET /api/external/approvals`

Response Changes

* `currentDegree` has been removed.
* `approvalStatus` has been changed.
    *  **before**  : `"NONE"` `"PENDING"` `"CANCELED"` `"REJECTED"` `"PARTIALLY_APPROVED"` `"APPROVED"` `"EXPIRED"`
    *  **after**  : `"PENDING"` `"CANCELED"` `"REJECTED"` `"IN_PROGRESS"` `"APPROVED"` `"EXPIRED"`
* `updatedUser` has been removed.
* `lines` `uuid` has been removed.
* `lines` `degree` has been replaced with `step`.
* `lines` `approvedAt` has been replaced with `actionAt`.
* `lines` `status` has been changed.
    *  **before**  : `"PENDING"` `"REQUESTED"` `"CANCELED"` `"APPROVED"` `"REJECTED"` `"SQL_EXECUTED"` `"SQL_CANCELED"` `"SQL_SUCCEED"` `"SQL_FAILED"` `"CONFIRMED"`
    *  **after**  : `"NONE"` `"PENDING"` `"CANCELED"` `"APPROVED"` `"REJECTED"` `"EXECUTED"` `"UNREAD"` `"CONFIRMED"`
* `lines` `type` has been changed.
    *  **before**  : `"REPORTER"` `"APPROVER"` `"EXECUTOR"` `"REFERRER"` `"REVIEWER"`
    *  **after :** `"APPROVER"` `"EXECUTOR"` `"REVIEWER"`

Response Before Change Example
```
{
  "list": [
    {
      "approvalStatus": "PENDING",
      "createdAt": "2019-08-24T14:15:22Z",
      "createdUser": "User Information",
      "currentDegree": 1,
      "description": "Approval Description",
      "id": 0,
      "lines": [
        {
          "approvedAt": "2019-08-24T14:15:22Z",
          "comment": "comment",
          "degree": 1,
          "status": "APPROVED",
          "type": "APPROVER",
          "userDepartment": "string",
          "userEmail": "string",
          "userLoginId": "string",
          "userName": "string",
          "userType": "USER",
          "userUuid": "string",
          "uuid": "UUID"
        }
      ],
      "title": "Approval Title",
      "type": "ACCESS",
      "updatedAt": "2019-08-24T14:15:22Z",
      "updatedUser": "User Information",
      "uuid": "UUID"
    }
  ],
  "page": {
    "currentPage": 0,
    "pageSize": 0,
    "totalElements": 0,
    "totalPages": 0
  }
}
```

Response After Change Example
```
{
  "list": [
    {
      "approvalStatus": "PENDING",
      "createdAt": "2019-08-24T14:15:22Z",
      "createdUser": "User Information",
      "description": "Approval Description",
      "id": 0,
      "lines": [
        {
          "actionAt": "2019-08-24T14:15:22Z",
          "comment": "comment",
          "status": "APPROVED",
          "step": 1,
          "type": "APPROVER",
          "userDepartment": "string",
          "userEmail": "string",
          "userLoginId": "string",
          "userName": "string",
          "userType": "USER",
          "userUuid": "string"
        }
      ],
      "title": "Approval Title",
      "type": "ACCESS",
      "updatedAt": "2019-08-24T14:15:22Z",
      "uuid": "UUID"
    }
  ],
  "page": {
    "currentPage": 0,
    "pageSize": 0,
    "totalElements": 0,
    "totalPages": 0
  }
}
```
