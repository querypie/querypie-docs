import { Callout } from 'nextra/components';

# QueryPie Client

QueryPie 플랫폼과 연결하여 안전하게 데이터베이스와 서버에 접근할 수 있습니다.

<Callout >
QueryPie Client MCP는 아직 사용자 기능만을 제공합니다.
</Callout>

## 주요 기능
- QueryPie DAC(Data Access Control)을 통한 데이터베이스 접근
- QueryPie SAC(Security Access Control)을 통한 서버 접근

## 기본 정보

### 인증 방식
QueryPie 플랫폼의 사용자명과 비밀번호를 사용하여 인증합니다.

### 입력 파라미터
- **Server URL** (필수): QueryPie API 서버 URL
- **Username** (필수): QueryPie 사용자명
- **Password** (필수): QueryPie 비밀번호

## 지원하는 MCP 도구
현재 DAC, SAC 관련 도구를 지원합니다.

### DAC(Data Access Control) 도구
QueryPie의 데이터 액세스 제어 기능을 통해 데이터베이스 접근을 관리합니다.

<Callout type="info">
QueryPie Client MCP는 QueryPie에서 Proxy Usage 옵션이 활성화된 데이터베이스에 대해서만 동작합니다.
</Callout>

#### list_accessible_db_cloud_providers
사용 가능한 모든 클라우드 프로바이더 목록을 조회합니다.

#### list_accessible_db_cluster_groups
특정 클라우드 프로바이더에 대해 접근 가능한 데이터베이스 클러스터 그룹 목록을 조회합니다.

**입력 파라미터:**
- `cloudProviderUuid` (필수): 클라우드 프로바이더 UUID

#### list_accessible_db_clusters
특정 클러스터 그룹에 대해 접근 가능한 데이터베이스 클러스터 목록을 조회합니다. 쿼리를 실행하려면 클러스터를 선택해야 합니다.

**입력 파라미터:**
- `clusterGroupUuid` (필수): 클러스터 그룹 UUID

#### run_db_query
데이터베이스에서 SQL 쿼리를 실행합니다.

**입력 파라미터:**
- `clusterUuid` (필수): 클러스터 UUID
- `proxyHost` (필수): 프록시 호스트
- `proxyPort` (필수): 프록시 포트
- `query` (필수): 실행할 SQL 쿼리

### SAC(Security Access Control) 도구
QueryPie의 보안 액세스 제어 기능을 통해 서버 접근을 관리합니다.

<Callout type="info">
QueryPie Client MCP는 Linux 계열의 서버에 대해서만 동작합니다.
</Callout>

#### list_accessible_server_roles
접근 가능한 모든 서버 역할 목록을 조회합니다. 다음 명령어에 사용할 역할을 선택해야 합니다.

#### list_accessible_server_groups
접근 가능한 모든 서버 그룹 목록을 조회합니다.

**입력 파라미터:**
- `roleUuid` (필수): 역할 UUID

#### list_accessible_servers
접근 가능한 모든 서버 목록을 조회합니다.

**입력 파라미터:**
- `roleUuid` (필수): 역할 UUID
- `serverGroupUuid` (필수): 서버 그룹 UUID

#### list_server_accounts
서버 계정 목록을 조회합니다. 서버에 연결하는 데 사용할 수 있는 모든 계정 목록입니다.

**입력 파라미터:**
- `roleUuid` (필수): 역할 UUID
- `serverUuid` (필수): 서버 UUID

#### run_server_command
서버에서 명령어를 실행합니다.

**입력 파라미터:**
- `roleUuid` (필수): 역할 UUID
- `host` (필수): 서버 호스트
- `port` (필수): 서버 포트
- `username` (필수): 사용자명
- `command` (필수): 실행할 명령어

## 사용 예시

예를 들어,
- Prompt로 "QueryPie를 통해 접근할 수 있는 데이터베이스 목록 알려줘" 라고 입력하면,
- LLM은 QueryPie MCP로 `list_accessible_db_cloud_providers`, `list_accessible_db_cluster_groups`, `list_accessible_db_clusters` 도구를 순차적으로 호출한 뒤, 호출 결과를 기반으로 답변합니다.

## 주의사항
- QueryPie 사용자명과 비밀번호는 안전하게 보관하세요.
- 적절한 권한 설정을 통해 보안을 유지하세요.
- 데이터 접근 시 조직의 보안 정책을 준수하세요.
- 정기적으로 접근 로그를 검토하세요. 