import { Callout } from 'nextra/components'

## Overview

QueryPie를 통해 접근제어를 통제하는 대상에 대해 종류별로 목록에 표시합니다.

상세 화면에서 민감정보가 존재하는 경로와 태그를 확인할 수 있고 사용자 정의 태그를 부여할 수 있습니다.

<figure data-layout="center" data-align="center">
![Administrator &gt; Discovery &gt; Discovery Management &gt; Inventory](/administrator-manual/discovery/discovery-management/inventory/image-20240714-055033.png)
<figcaption>
Administrator &gt; Discovery &gt; Discovery Management &gt; Inventory
</figcaption>
</figure>


## Inventory의 주요기능

관리자가 발견된 민감정보에 대해 확인을 완료하면 태그가 확정이 되어 Inventory의 data path에 반영이 됩니다. 여기서 data path란 QueryPie DB 접근제어, 시스템 접근제어, 쿠버네티스 접근제어에서 등록된 커넥션을 기반으로 민감정보가 존재하는 경로를 의미합니다. (10.0.0에서는 민감 정보 탐색이 지원되는 대상이 RDBMS만 가능하기 때문에 inventory에서도 DB 접근제어의 RDBMS 커넥션에 대한 관리만 가능합니다.)

<Callout type="info">
**QueryPie에서 사용하는 태그의 종류**

1. QueryPie Tag (System Tag) : 시스템에서 자동 부여된 태그로 기본적으로 사용자가 수정하거나 추가할 수 없습니다.
2. Provider Tag (Cloud sync tag) : 클라우드에서 동기화한 태그입니다. 각 클라우드는 관리되고 있는 태그가 있을 수 있습니다. 이 태그는 클라우드에서 가져왔기 때문에 QueryPie에서 수정, 추가, 삭제 할 수 없습니다.
3. Custom Tag : 사용자가 QueryPie 내에서 자유롭게 부여할 수 있는 태그입니다.
4. Resource Tag : 각 커넥션에는 클라우드에서 가져온 Provider tag와 사용자가 부여한 Custom tag 두가지가 존재할 수 있습니다. 이를 Resource Tag라고 부릅니다.

<figure data-layout="center" data-align="center">
![&lt; Tag 예시 &gt;](/administrator-manual/discovery/discovery-management/inventory/image-20240730-023812.png)
<figcaption>
&lt; Tag 예시 &gt;
</figcaption>
</figure>
</Callout>


## Inventory 목록

<figure data-layout="center" data-align="center">
![image-20240730-041253.png](/administrator-manual/discovery/discovery-management/inventory/image-20240730-041253.png)
</figure>

*  **Category**  : QueryPie 서비스별 분류를 표시합니다. 각 접근제어 시스템에 해당하는 Database, System, Kubernetes가 있습니다.
*  **Name**  : 각 접근제어 시스템이 사용 중인 커넥션 이름입니다. 만약 커넥션이 하나도 없는 경우(QueryPie 최초 설치한 상태) 목록에 표시할 데이터가 없으므로 먼저 접근제어 시스템에서 커넥션을 먼저 생성해야 합니다. 
*  **Data Source Type**  : 데이터소스의 종류별 구분입니다. (MySQL, Oracle 등.)
*  **Resource Tags**  : 커넥션에 부여되어 있는 태그입니다. 클라우드에서 동기화한 프로바이더 태그와 사용자가 생성한 커스텀 태그가 있습니다.
*  **Cloud Provider**  : 대상 리소스가 클라우드에 존재할 때 나타나는 Cloud provider의 이름입니다. (AWS, Azure, GCP 등)
*  **Related Compliance**  : 민감정보가 발견된 경로를 커넥션이 포함하고 있다면 발견된 민감정보와 관련된 컴플라이언스를 보여줍니다.
*  **Sensitive Items**  : 발견된 민감정보 태그를 보여줍니다.
*  **Created At**  : 커넥션이 생성된 시점입니다. 
*  **Last Updated At**  : 커넥션의 정보가 수정된 최종 시점입니다.

목록의 각 행을 클릭하면 커넥션에 대한 정보와 종속된 경로를 확인 할 수 있습니다.


## 커넥션 정보 및 리소스 태그 관리

상세정보에서 커넥션의 기본 정보와 부여된 태그를 확인하고 관리할 수 있습니다.

<figure data-layout="center" data-align="center">
![image-20240730-043435.png](/administrator-manual/discovery/discovery-management/inventory/image-20240730-043435.png)
</figure>

Resource Tags에는 커넥션에 부여된 태그(Provider tag 및 Custom Tag)가 표시되고 `+ Add Tags`을 클릭하여 태그관리 수행할 수 있습니다.


## 커넥션 하위의 데이터 경로

<figure data-layout="center" data-align="center">
![커넥션 하위의 data path 목록과 지정된 민감정보 태그](/administrator-manual/discovery/discovery-management/inventory/image-20241030-013932.png)
<figcaption>
커넥션 하위의 data path 목록과 지정된 민감정보 태그
</figcaption>
</figure>

스캔이 최소 1회 성공적으로 완료된 커넥션은 대상 데이터베이스의 컬럼까지의 경로를 보여줍니다. <br/>경로는 아래와 같은 구조로 구성되어 있습니다. <br/>![image-20240730-045803.png](/administrator-manual/discovery/discovery-management/inventory/image-20240730-045803.png)

만약 해당 경로에 [스캔 결과의 검토](Scan Results)로 확정된 민감정보를 포함하고 있는 컬럼이 존재하다면 민감정보 태그와 유형, 관련된 컴플라이언스 정보를 같이 확인할 수 있습니다.

## 자동으로 탐지되지 않은 민감정보의 수동 처리

민감정보가 존재하지만 자동 검출되지 않은 민감정보가 존재하는 컬럼에 대해 관리자가 수동으로 민감정보 태그를 부여할 수 있습니다. (일반적으로 이런 상태는 False Negative 입니다.)

1. Inventory 상세 페이지에서 민감정보가 자동 검출되지 않은 data path를 선택합니다.
2. Sensitive Items 항목의 `Add New Item` 버튼을 클릭합니다.<br/>  
    1. 민감정보에 맞는 태그를 선택하고 `OK` 버튼을 누릅니다.<br/>
    2. False Negative 처리된 결과를 확인합니다.<br/>

## 민감정보 태그 제거

스캔결과에 대한 검토 결과로 부여된 민감정보 태그와 수동으로 부여한 민감정보 태그 모두 Inventory에서 제거할 수 있습니다. <br/>

<figure data-layout="center" data-align="center">
![기존에 지정된 민감 정보 태그 제거](/administrator-manual/discovery/discovery-management/inventory/image-20241030-021053.png)
<figcaption>
기존에 지정된 민감 정보 태그 제거
</figcaption>
</figure>

1. 제거할 민감 정보 태그를 선택합니다.
2. `Remove` 버튼을 누릅니다.
3. 확인 대화창에서 `Remove` 버튼을 누릅니다.<br/>

## 컬럼에 태그 부여

각 데이터 경로에 있는 `Add Custom Tags` 버튼을 사용하여 특정 컬럼에 사용자 정의 태그를 부여할 수 있습니다. <br/>

<figure data-layout="center" data-align="center">
![Add Custom Tag](/administrator-manual/discovery/discovery-management/inventory/image-20241030-033748.png)
<figcaption>
Add Custom Tag
</figcaption>
</figure>

1. Custom Tags 항목의 `Add Custom Tag` 버튼을 클릭합니다.
2. Key에 해당하는 임의의 값을 입력하고 엔터를 입력하면 `:` 이 입력됩니다.
3. Value에 해당하는 임의의 값을 입력하고 엔터를 입력하면 태그가 추가됩니다. 이렇게 하나이상의 태그를 추가하고 `OK` 버튼을 누릅니다.

<figure data-layout="center" data-align="center">
![태그 입력](/administrator-manual/discovery/discovery-management/inventory/image-20241030-034024.png)
<figcaption>
태그 입력
</figcaption>
</figure>

1. 입력된 태그를 확인합니다. <br/>태그 옆의 X를 누르면 부여한 커스텀 태그가 제거됩니다. 

## 제약사항

* 민감 정보 탐색이 지원되는 대상: MySQL, MariaDB, Oracle, PostgreSQL, MS SQLserver, Azure SQL<br/>탐색이 수행되어야 DB의 경로를 수집할 수 있기 때문에 지원하지 않는 DB의 data path는 표시되지 않습니다.
* 최소 1회의 성공적인 스캔이 수행되어야 합니다. Discovery job을 생성할 때 지정한 커넥션에 대해 최소한 1회의 스캔이 성공해야 inventory에 대상 path를 볼 수 있습니다. 그렇지 않으면 커넥션만 볼 수 있습니다.
* Inventory에서는 대상에 사용자 정의 태그만 부여할 수 있습니다. 민감정보 태그는 QueryPie에서 사용하는 시스템 태그이므로 Scan Results 페이지에서 태그를 관리해야 합니다. 


