## Overview
QueryPie 안에서 일어나는 모든 활동은 감사 로그에 기록됩니다. 사용자와 관리자의 로그인/로그아웃, 권한 부여와 회수, DB, 서버 및 쿠버네티스에 대한 접근, 쿼리 또는 명령어 수행, 리소스 또는 보안 설정 변경 등 QueryPie와 접근제어 대상 리소스에서 발생하는 모든 활동 이력이 로깅 대상입니다.



## 제공 기능
*  **감사 로그 추출**  :  **Audit Log Export**  메뉴에서 감사 로그를 파일 형태로 추출하여 저장할 수 있습니다. 
*  **보고서 출력**  :  **Report**  메뉴에서 QueryPie의 데이터 현황을 보고서 형태로 출력할 수 있습니다.
*  **감사 로그 조회**  : Audit 메뉴 하위의 ** 개별 로그 페이지** 에서 로그의 실시간 조회, 검색 및 필터링이 가능합니다.



## 조회 가능한 감사 로그 종류
1. 개별 로그 페이지 내 목록에서 실시간으로 저장되는 로그를 확인할 수 있습니다. (최신 순으로 정렬)
2. 특정 컬럼의 값으로 로그를 검색하거나 필터링할 수 있습니다. 
3. 목록에서 특정 로그를 클릭하면 Drawer에서 상세 정보를 확인할 수 있습니다.

조회 가능한 감사 로그의 종류는 보유하고 계신 라이선스에 따라 구성이 달라지며, 라이선스별 제공되는 로그의 종류는 아래와 같습니다.

|  **공통 로그**                                                                                      |  **DAC 전용 로그**                                                                                                    |  **SAC 전용 로그**                                                                                                                              |  **KAC 전용 로그**                                                                 |
| ----------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------ |
|  **General** [ul]User Access HistoryActivity LogsAdmin Role HistoryWorkflow LogsReverse Tunnels |  **Databases** [ul]DB Access HistoryQuery AuditRunning QueriesDML SnapshotAccount Lock HistoryAccess Control Logs |  **Servers** [ul]Server Access HistoryCommand AuditSession LogsSession MonitoringAccess Control LogsServer Role HistoryAccount Lock History |  **Kubernetes** [ul]Request AuditPod Session RecordingsKubernetes Role History |

**1. General**

* User Access History : 사용자 로그인, 로그아웃 이력
* Activity Logs : 관리자가 수행하는 리소스 등록 및 설정 변경 이력 
* Admin Role History : 관리자 권한 부여, 변경, 회수 이력
* Workflow Logs : 워크플로우 타입별 작업의 상태 변경(요청, 승인, 거절 등) 이력
* Reverse Tunnels : 현재 연결 중인 리버스 터널링 세션 전체 모니터링 (Reverse Tunnel Agent 모니터링)



**2. Databases**

* DB Access History : 커넥션 연결 및 연결해제 이력
* Query Audit : 실행이 끝난 쿼리 수행 이력
* Running Queries : 현재 실행 중인 쿼리 
* DML Snapshot : INSERT / UPDATE / DELETE 쿼리 실행 완료시 전후 데이터 기록 (기록 위해 별도 설정 필요)
* Account Lock History : 패스워드 실패 및 장기미접속으로 인한 커넥션 잠금 이력
* Access Control Logs : 커넥션 접근 권한 부여 및 회수 이력



**3. Servers **

* Server Access History : 서버 연결 및 연결해제 이력
* Command Audit : 실행이 끝난 명령어 수행 이력 
* Session Logs : 개별 세션 이력 및 세션 리플레이 기능 제공 
* Session Monitoring : 현재 연결 중인 세션 전체 모니터링 (필요 시 관리자가 세션 강제 종료 가능) 
* Access Control Logs : Direct Permission 및 Workflow 를 통한 서버 접근 권한 부여 및 회수 이력
* Server Role History : Role 메뉴를 통한 서버 접근 권한 부여 및 회수 이력
* Account Lock History : 서버 접속 계정 잠금 이력 



**4. Kubernetes**

* Request Audit : 쿠버네티스 API 서버 호출 내역
* Pod Session Recordings : Pod Exec 등의 연결 세션 내 행위 녹화 내역
* Kubernetes Role History : 쿠버네티스 접근 권한 부여 및 회수 이력


