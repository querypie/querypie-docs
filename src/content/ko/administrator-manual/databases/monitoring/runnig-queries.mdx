import { Callout } from 'nextra/components'

## Overview

Running Queries는 Web editor나 Workflow 및 Proxy를 통해 수행한 쿼리에 대한 정보를 확인하고 필요시 관리자가 강제로 수행 중인 쿼리를 중지하는 기능을 제공합니다. 수행한 쿼리는 Running Queries의 Executed From 필드를 통해 Web Editor에서 수행한 쿼리인지, Workflow를 통해 수행된 쿼리인지 확인할 수 있습니다.

## Running Queries 조회하기

<figure data-layout="center" data-align="center">
![Databases &gt; Monitoring &gt; Running Queries](/administrator-manual/databases/monitoring/runnig-queries/image-20250512-110402.png)
<figcaption>
Databases &gt; Monitoring &gt; Running Queries
</figcaption>
</figure>

1. Databases &gt; Monitoring &gt; Running Queries 메뉴로 이동합니다.
2. 당일 기준으로 내림차순으로 로그가 조회됩니다.
3. 테이블 좌측 상단의 필터 버튼을 클릭하여 AND/OR 조건으로 이하의 필터링이 가능합니다.
    1.  **SQL Type** : SQL 구문 유형
    2.  **Action At**  : 쿼리 실행 일시 범위
    3.  **Executed From**  : 쿼리 실행 주체
        1.  **Web Editor**  : 쿼리파이 웹 에디터에서 실행
        2.  **Proxy**  : 쿼리파이 프록시를 통한 실행
        3.  **SQL Request**  : SQL Request 워크플로를 통한 실행
        4.  **SQL Job**  : SQL Job에 의한 실행
        5.  **SQL Export Request**  : SQL Export Request 워크플로를 통한 실행
4. 테이블 우측 상단의 새로고침 버튼을 통해 로그 목록을 최신화할 수 있습니다.
5. 테이블에서 이하의 컬럼 정보를 제공합니다:
    1.  **No**  : 이벤트 식별 번호
    2.  **Executed At**  : 쿼리 실행 일시
    3.  **Name**  : 대상 사용자
    4.  **Email**  : 대상 사용자 이메일
    5.  **Action Type**  : 액션 유형
    6.  **Connection Name**  : 대상 DB 커넥션명
    7.  **Database Type**  : 대상 데이터베이스 유형
    8.  **Privilege**   **Name**  : 사용자 접속 권한
    9.  **Client IP**  : 사용자 클라이언트 IP 주소
    10.  **Replication Type**  : DB Replication 유형
    11.  **DB Host**  : 접속한 DB 호스트
    12.  **DB Name**  : DB명
    13.  **DB User**  : DB 사용자 ID
    14.  **Table(s)**  : 호출 테이블명
    15.  **SQL Type** : SQL 구문 유형
    16.  **Query**  : 실행 쿼리문
    17.  **Client**   **Name**  : 이용 클라이언트명 (DataGrip 등)
    18.  **Execution Reason**  : 쿼리 실행 사유
    19.  **Executed From**  : 쿼리 실행 주체

## Running Query 상세 내역 조회하기

각 행을 클릭하면 세부 정보 조회가 가능합니다.

<figure data-layout="center" data-align="center">
![Databases &gt; Monitoring &gt; Running Queries &gt; Running Query Details](/administrator-manual/databases/monitoring/runnig-queries/image-20250512-110509.png)
<figcaption>
Databases &gt; Monitoring &gt; Running Queries &gt; Running Query Details
</figcaption>
</figure>

* 우측 드로워에는 이하의 정보를 노출합니다:
    1.  **Name**  : 대상 사용자 이름
    2.  **Action Type**  : 액션 유형
    3.  **Privilege**   **Name**  : 사용자 접속 권한
    4.  **Privilege**   **Type**  : 사용자 접속 권한 유형
    5.  **SQL Type** : SQL 구문 유형
    6.  **Executed From**  : 쿼리 실행 주체
    7.  **Connection Name**  : 대상 DB 커넥션명
    8.  **Replication Type**  : DB Replication 유형
    9.  **Client**   **Name**  : 이용 클라이언트명 (DataGrip 등)
    10.  **Client IP**  : 사용자 클라이언트 IP 주소
    11.  **Database Type**  : 대상 데이터베이스 유형
    12.  **DB Host**  : 접속한 DB 호스트
    13.  **DB Name**  : DB명
    14.  **DB User**  : DB 사용자 ID
    15.  **Table(s)**  : 호출 테이블명
    16.  **Query**  : 실행 쿼리문

## 쿼리 중지하기

Web Editor를 통해 수행한 쿼리와 Workflow의 SQL Request 또는 SQL Export Request를 통해 수행 중인 쿼리는 Running Queries에서 관리자가 개입아여 중지할 수 있습니다.

<Callout type="info">
Proxy를 통해 수행한 쿼리 정보를 조회할 수는 있으나 중지할 수 없습니다. 만약 중지를 원한다면, Proxy Management에서 세션을 중지해야 합니다.
</Callout>

<figure data-layout="center" data-align="center">
![쿼리 중지하기](/administrator-manual/databases/monitoring/runnig-queries/image-20250512-111342.png)
<figcaption>
쿼리 중지하기
</figcaption>
</figure>

1. 중지하고자하는 쿼리를 체크합니다.
2. Kill Query 버튼을 누릅니다.
3. 경고 메시지를 확인하고 `OK` 버튼을 누르면 쿼리가 중지됩니다.
