---
title: 'WAC 트러블슈팅 가이드'
---

# WAC 트러블슈팅 가이드

본 문서에서는 WAC 사용 도중 생길 수 있는 문제들과 해결책을 안내합니다.

#### Extension (QueryPie Web Secure) 설치 직후 테스트에서 접근 정책이 적용되지 않거나 오딧 로그가 누락되는 경우

WAC 익스텐션 설치 전에 열려 있던 탭들에 대해서는 관리가 보장되지 않습니다.

이러한 상황을 예방하기 위하여, 기존에 열려있던 모든 브라우저 탭 및 창을 닫은 후에 익스텐션을 설치하시기 바랍니다.


#### WebApp 에 접속이 안되고, 브라우저에`ERR_TIMED_OUT`에러 메세지가 표시되는 경우

<figure data-layout="center" data-align="center">
![image-20250401-011848.png](/administrator-manual/web-apps/wac-quickstart/wac-troubleshooting-guide/image-20250401-011848.png)
</figure>

브라우저가 WAC Proxy 와 연결을 못하여 발생하는 현상일 수 있습니다.

먼저 Admin &gt; Web Apps &gt; Web app Configuration 메뉴에서 WAC Proxy 주소가 잘 셋팅되어 있는지 확인합니다.

<figure data-layout="center" data-align="center">
![image-20250401-012042.png](/administrator-manual/web-apps/wac-quickstart/wac-troubleshooting-guide/image-20250401-012042.png)
</figure>

문제가 발생한 브라우저의 로컬 터미널에서 아래 명령어를 실행하여 WAC Proxy 로 연결이 되는지 확인합니다.

먼저 nc(netcat) CLI 로 포트 접속이 되는지 확인합니다.
```
$ nc -vz internal-proxy.querypie.io 7447
Connection to internal-proxy.querypie.io port 7447 [tcp/*] succeeded!
```

nc 접속이 잘된다면 아래처럼 curl 명령으로 HTTP 요청과 응답이 잘 오는지 확인합니다.

nc 접속이 잘된다면 아래처럼 curl 명령으로 HTTP 요청과 응답이 잘 오는지 확인합니다.
```
$ $ curl -v -k https://internal-proxy.querypie.io:7447
* Host internal-proxy.querypie.io:7447 was resolved.
* IPv6: (none)
* IPv4: 10.60.40.1, 10.60.52.85, 10.60.74.191
*   Trying 10.60.40.1:7447...
* Connected to internal-proxy.querypie.io (10.60.40.1) port 7447
* ALPN: curl offers h2,http/1.1
* (304) (OUT), TLS handshake, Client hello (1):
* (304) (IN), TLS handshake, Server hello (2):
* (304) (IN), TLS handshake, Unknown (8):
* (304) (IN), TLS handshake, Certificate (11):
* (304) (IN), TLS handshake, CERT verify (15):
* (304) (IN), TLS handshake, Finished (20):
* (304) (OUT), TLS handshake, Finished (20):
* SSL connection using TLSv1.3 / AEAD-CHACHA20-POLY1305-SHA256 / [blank] / UNDEF
* ALPN: server did not agree on a protocol. Uses default.
* Server certificate:
*  subject: CN=internal-proxy.querypie.io
*  start date: Feb 13 00:00:00 2025 GMT
*  expire date: Feb 13 00:00:00 2075 GMT
*  issuer: CN=querypie
*  SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.
* using HTTP/1.x
> GET / HTTP/1.1
> Host: internal-proxy.querypie.io:7447
> User-Agent: curl/8.7.1
> Accept: */*
>
* Request completely sent off
< HTTP/1.1 407 Proxy Authentication Required
< Proxy-Authenticate: Basic realm="QueryPie Proxy"
< Date: Tue, 01 Apr 2025 01:22:26 GMT
< Content-Length: 0
<
* Connection #0 to host internal-proxy.querypie.io left intact
```

여기까지 진행하였는데도 현상이 동일하다면 크롬 브라우저의 네트워크 로그가 필요합니다.

**실행방법**

* 크롬 브라우저에서 `chrome://net-export/` 열고 Start Over 을 클릭합니다. (Options 는 디폴트 값인 `Strip private information` 를 선택합니다.)

<figure data-layout="center" data-align="center">
![image-20250401-012452.png](/administrator-manual/web-apps/wac-quickstart/wac-troubleshooting-guide/image-20250401-012452.png)
</figure>

* 크롬 브라우저에서 접속이 안되는 WebApp 주소를 입력하여 이동합니다.
* 현상이 재현된 것을 확인하고, 다시 `chrome://net-export/` 탭으로 이동하여 Stop Logging 을 클릭합니다.
* 크롬 브라우저 네트워크 로그 파일을 복사합니다.

**로그 분석 방법**

* [https://netlog-viewer.appspot.com/](https://netlog-viewer.appspot.com/) 에 접속합니다.
* 왼쪽 Import 메뉴에서 위에서 받은 로그 파일을 업로드 합니다.
* 왼쪽 Events 메뉴에서 네트워크 송수신 내용을 확인합니다.

<figure data-layout="center" data-align="center">
![image-20250401-012759.png](/administrator-manual/web-apps/wac-quickstart/wac-troubleshooting-guide/image-20250401-012759.png)
</figure>


#### PC가 장시간 잠자기 모드에서 깨어났을 때, 크롬 브라우저에서 관리하는 로그인 창이 노출되는 경우

PC가 잠자기 모드로 진입하였다 깨어난 경우 크롬 브라우저에서 관리하는 로그인 창이 노출될 수 있습니다.

이 로그인 창은 브라우저에서 Proxy 인증을 수행하는 실패하였기 때문에 나타나는 것으로, QueryPie 아이디 및 비밀번호를 입력하여도 인증이 되지 않습니다.

이 경우 다음과 같이 진행하면 다시 정상적으로 제품을 사용할 수 있습니다.

**해결 방법:**

1. 익스텐션에 다시 로그인합니다.
2. Role을 선택합니다.
3. 크롬 브라우저에서 관리하는 로그인 창이 표시된 탭을 새로고침 합니다.


#### QueryPie API 서버 장애로 인해 웹 브라우저 내에서 마우스 클릭이 먹통이 된 경우

QueryPie API 서버의 장애가 발생하는 경우 웹 브라우저 내에서 계속해서 마우스 클릭이 되지 않을 수 있습니다.

이 때는 임시적으로 다음과 같이 WAC 익스텐션 비활성화 조치 후, 관리자에게 문의하시기 바랍니다.

**해결 방법:**

1. Chrome &gt; 확장프로그램 관리 페이지로 이동합니다. (주소창에서 chrome://extensions/ 을 입력하면 손쉽게 이동할 수 있습니다)
2. 전체 확장 프로그램 목록에서 QueryPie Web Secure (익스텐션) 을 찾고, 우측 하단의 토글을 비활성화 합니다.

이를 통해 QueryPie WAC을 통해서만 접근하도록  **지정되지 않은**  웹 앱은 정상적으로 브라우징 가능합니다.

QueryPie API 서버의 정상화 후에는 다시 익스텐션을 사용하실 수 있습니다. 익스텐션을 활성화한 후, 재설정을 수행하시기를 권장드립니다.


#### QueryPie Web Secure 로그 추출 방법

QueryPie Web Secure (Extension)에 문제가 생겼을 경우 관련 로그를 추출하는 방법을 안내합니다.

1. 다음의 방법으로 크롬 개발자 도구를 실행합니다.
    1. Windows : Ctrl + Shift + I
    2. MacOS : Cmd + Option + I
    3. 또는, 문제가 발생한 창에서 마우스 우클릭 후 컨텍스트 메뉴에서 `검사` 버튼 클릭

1. 패널 목록에서, `QueryPie Web Secure` 를 클릭합니다.
2. 개발자 도구에서 로그 추출 기능이 실행됩니다. `Export Log` 버튼을 클릭하면 querypie-web-secure-logs.json 파일의 별도 저장이 실행됩니다. `저장` 버튼을 누릅니다.
3. 저장 완료된 로그를 CS 요청 시 함께 첨부합니다.
