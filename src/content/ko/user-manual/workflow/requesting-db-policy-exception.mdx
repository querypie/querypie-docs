import { Callout } from 'nextra/components'

## Overview

10.2.6부터 지원하는 DAC 신규 정책을 사용할 경우 기존의 Unmasking Request 또는 Restricted Data Access Request 를 통해 Workflow로 요청할 수 없습니다. 즉, 신규 정책 기능을 활성화 한 경우 Request 메뉴에 표시되는 DB Policy Exception Request 를 사용합니다. <br/>DB Policy Exception Request는 기존 정책과 다르게 Unmasking과 Restricted Data Access가 별도의 양식으로 분리되어 있지 않고 하나의 양식에서 Exception Type을 Unmasking, Restricted Data Access 둘 중 하나를 선택하는 방식입니다.

## 정책 예외 요청하기

### 1. 결재 규칙 선택하기

* Approval Rule을 선택하여 목적에 맞는 결재 규칙을 선택하세요. 선택한 규칙에 따라 승인 대상이 달라집니다.
* 만약 관리자가 승인자를 지정한 결재 규칙이 선택된 경우, 자동으로 승인자가 지정되며 추가 및 변경이 불가합니다.
<p align="center">
![image-20240801-074431.png](./requesting-db-policy-exception/image-20240801-074431.png)
</p>

### 2. 승인자 지정하기

* 결재 라인에서 `+` 버튼을 누르면 단계별 승인자를 지정할 수 있는 팝업창이 표시됩니다.
* 이 팝업창에서 결재 승인 조건 및 승인자를 추가 후 `Save` 버튼을 눌러 결재 라인을 저장합니다.
* 선택 가능한 승인 조건은 다음과 같습니다.
    * A single Assignee can complete the approval request : 여러 명 중 한 명의 승인만으로 결재 요청이 승인 처리됩니다.
    * All Assignees must approve this request : 모든 승인자가 승인하여야 결재 요청이 승인 처리됩니다.
<p align="center">
![screenshot-20240724-154729.png](./requesting-db-policy-exception/screenshot-20240724-154729.png)
</p>

### 3. 참조자 지정하기

* 결재 라인에서 `+` 버튼을 누르면 참조자를 지정할 수 있는 팝업창이 표시됩니다.
    * 관리자가 참조자 지정을 허용하지 않은 경우에는 Reviewer 박스가 표시되지 않습니다.
* 이 팝업창에서 결재 승인 조건 및 승인자를 추가합니다.
* `Save` 버튼을 눌러 모달을 닫고 참조자 지정을 완료합니다.
<p align="center">
![screenshot-20240724-171350.png](./requesting-db-policy-exception/screenshot-20240724-171350.png)
</p>

### 4. 사후 승인으로 요청 보내기

* 사후 승인 기능이 허용된 결재 규칙을 선택한 경우 Urgent Mode 스위치가 표시됩니다.
* Urgent mode = On 으로 설정 후 결재 요청을 등록하면 즉시 권한을 부여받거나 작업을 수행할 수 있습니다.
<p align="center">
![screenshot-20240523-184245.png](./requesting-db-policy-exception/screenshot-20240523-184245.png)
</p>

<Callout type="important">
**Q. Urgent Mode 스위치가 보이지 않아요.**
A. 관리자가 Urgent Mode를 허용하지 않은 결재 규칙을 선택한 경우, 해당 기능이 표시되지 않습니다.
</Callout>

### 5. 요청 상세정보 입력하기

*  **Title**  : 요청 제목을 입력합니다.
*  **Excpetion Type**  : 일시적인 마스킹 해제 요청인 경우 Unmasking을 선택하고 접근 차단된 경로를 임시로 접근 요청하는 경우는 Restricted Data Access 를 선택합니다.
*  **Connection**  : 마스킹 허용 또는 접근 허용을 요청할 대상 테이블 또는 컬럼이 속한 커넥션을 선택합니다.<br/>마스킹해제는 마스킹 정책이 컬럼 단위이므로 컬럼만 선택할 수 있습니다. 
*  **Data Scope : ** Data Path와 Tag중 하나를 선택할 수 있습니다. 기본값은 “Data Path” 입니다.
    *  **Data Path ** : 마스킹 해제 또는 접근하려는 컬럼이나 테이블을 직접 지정합니다.
        *  **Table :**  대상 테이블을 선택합니다. 
        *  **Column : ** 1개 이상 컬럼을 선택할 수 있으며, 최대 30개까지 선택할 수 있습니다.
    *  **Tag**  : 만약 신청자가 특정 경로에 정책이 태그기반으로 설정되어 있는 것을 알고 있고 어떤 태그가 부여되어 있는 지 알고 있는 경우 태그를 지정하여 신청할 수 있습니다. 일반적으로 신청자가 정책이 태그로 설정되어 있는지 어떤 태그가 사용되고 있는지 모르기 때문에 태그로 신청할 때는 먼저 관리자의 도움을 받아야 합니다. 
        *  **Tags**  : Data scope를 태그로 지정한 경우 정책에서 사용된 태그를 사용할 수 있습니다.
*  **Data Access Expiration**  : 요청할 데이터 접근 허용 기간을 설정할 수 있습니다.
    1. Time Duration 선택시, 분 단위로 입력 가능하고 최소는 1분, 최대는 44,640분으로 요청할 수 있습니다. 
        1. Time Duration 의 경우, 승인 시점을 기준으로 동작합니다.
        2. Urgent Mode 사용하는 경우, Request 등록 시점을 기준으로 데이터에 접근할 수 있습니다.
    2. End Date 선택시, 일자와 시간을 기준으로 선택 가능하며, 최소는 현재 시간, 최대는 30일로 요청할 수 있습니다.
*  **Reason for Request**  : 정책 예외 신청 사유를 입력합니다. 최대 1000자까지 입력할 수 있습니다.
* 페이지 하단의 `Submit` 버튼을 눌러 요청을 상신합니다.<br/>



