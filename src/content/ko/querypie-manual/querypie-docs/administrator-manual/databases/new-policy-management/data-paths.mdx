## Overview
Data Paths 메뉴에서는 테이블과 컬럼에 태그를 할당하고 관리할 수 있습니다. 이렇게 설정된 태그는 데이터 분류 및 정책 적용에 활용됩니다.

## 주요 특징
* 태깅 적용 대상: 테이블과 컬럼 레벨에서 태그 적용이 가능합니다.
* 적용 제한: 데이터베이스, 스키마 레벨에는 태그 지원이 되지 않습니다.
* 테이블 접근제어: 태그가 할당된 테이블만 접근가능하도록 White List 방식으로 권한을 부여할 수 있습니다. 
* 데이터 분류: 태그를 통해 데이터를 목적과 특성에 따라 분류할 수 있습니다.
* 접근 제어 연계: 할당된 태그를 기반으로 접근 제어 정책을 설정할 수 있습니다.

 

## 테이블에 태그 할당하기 
 테이블 태깅은 Data Paths 메뉴에서 관리할 수 있으며, 태그를 통해 테이블을 체계적으로 분류하고 관리할 수 있습니다.

1. 좌측 사이드바에서 Policy Management 섹션 아래의 Data Paths를 클릭합니다.
2. 기본적으로 Tables 탭이 선택되어 있습니다.
3. 우측 상단의 Add Table 버튼을 클릭합니다.
4. 팝업 창에서 다음 정보를 입력합니다:Connection: 드롭다운에서 데이터베이스 연결을 선택합니다.Database Name: 드롭다운에서 데이터베이스 이름을 선택합니다.Table Name: 태그를 할당할 테이블을 선택합니다. 
  1. Connection: 드롭다운에서 데이터베이스 연결을 선택합니다.
  2. Database Name: 드롭다운에서 데이터베이스 이름을 선택합니다.
  3. Table Name: 태그를 할당할 테이블을 선택합니다. 
5. 모든 정보를 입력한 후 OK 버튼을 클릭하여 테이블을 추가합니다.

1. 테이블이 추가되면 목록에 표시되며, 상세페이지에서 "Add Tags" 버튼을 클릭하여 새 태그를 추가할 수 있습니다.
2. 태그는 Key:Value 형태로 추가할 수 있습니다. 
3. 페이지 상단에 선택한 테이블의 기본 정보가 표시됩니다. Connection 선택시 해당 커넥션의 상세 페이지로 이동합니다.Column Check 클릭시 우측에 테이블 컬럼 목록이 나타납니다. 
  1. Connection 선택시 해당 커넥션의 상세 페이지로 이동합니다.
  2. Column Check 클릭시 우측에 테이블 컬럼 목록이 나타납니다. 

테이블 상세 화면에서는 테이블에 대한 태그만 관리할 수 있습니다. 컬럼 태그는 컬럼 상세 화면에서 관리합니다.

 

## 컬럼에 태그 할당하기 
컬럼 태깅 또한 Data Paths 메뉴에서 관리할 수 있습니다. 태그를 통해 컬럼을 체계적으로 분류할 수 있으며, 마스킹 등의 정책을 효과적으로 일괄 적용할 수 있습니다. 

1. Data Paths 메뉴의 상단 탭에서 Columns 탭을 선택합니다.
2. 우측 상단의 Add Column 버튼을 클릭합니다.
3. 팝업 창에서 다음 정보를 입력합니다:Connection: 드롭다운에서 데이터베이스 연결을 선택합니다.Database Name: 드롭다운에서 데이터베이스 이름을 선택합니다.Table Name: 태그를 할당할 테이블을 선택합니다. Column Name: 태그를 할당할 컬럼 이름을 선택합니다.
  1. Connection: 드롭다운에서 데이터베이스 연결을 선택합니다.
  2. Database Name: 드롭다운에서 데이터베이스 이름을 선택합니다.
  3. Table Name: 태그를 할당할 테이블을 선택합니다. 
  4. Column Name: 태그를 할당할 컬럼 이름을 선택합니다.
4. 모든 정보를 입력한 후 OK 버튼을 클릭하여 컬럼을 추가합니다.

1. 컬럼이 추가되면 목록에 표시되며, 상세페이지에서 "Add Tags" 버튼을 클릭하여 새 태그를 추가할 수 있습니다.
2. 태그는 Key:Value 형태로 추가할 수 있습니다. 
3. 상세 페이지 상단에 선택한 컬럼의 기본 정보가 표시됩니다. Connection 선택시 해당 커넥션의 상세 페이지로 이동합니다.Column 클릭시 테이블 상세 페이지로 이동합니다. 
  1. Connection 선택시 해당 커넥션의 상세 페이지로 이동합니다.
  2. Column 클릭시 테이블 상세 페이지로 이동합니다. 

중요: 참조하는 테이블이 Data Paths에 아직 추가되지 않은 상태에서 컬럼을 추가하면, 해당 테이블이 자동으로 Data Paths에 함께 추가됩니다. 따라서 별도로 테이블을 먼저 추가하지 않아도 컬럼 추가 과정에서 필요한 테이블이 자동으로 생성됩니다.

 

## 테이블과 컬럼의 관계 - 자동 테이블 생성 기능
QueryPie는 사용자 편의성을 높이기 위해 컬럼을 추가할 때 다음과 같은 자동화 기능을 제공합니다:

1. 테이블 자동 생성: 컬럼을 추가할 때 참조하는 테이블이 Data Paths에 등록되어 있지 않다면, 해당 테이블이 자동으로 Data Paths에 추가됩니다.
2. 단일 프로세스: 이 기능 덕분에 사용자는 테이블을 먼저 추가하고 컬럼을 추가하는 두 단계를 거치지 않고, 컬럼 추가 과정에서 한 번에 처리할 수 있습니다.
3. 일관성 유지: 자동 생성된 테이블과 추가된 컬럼 간의 관계가 자동으로 설정되어 데이터 구조의 일관성이 유지됩니다.

## 태그 기반으로 테이블 접근 권한 부여하기
Data Paths 메뉴에서 설정한 태그를 기반으로 테이블 접근 권한을 부여할 수 있으며 whitelist 방식으로 작동합니다. 즉, 특정 태그가 부여된 테이블에만 접근을 허용하고 나머지 테이블에는 접근을 제한하는 방식입니다. 이 기능을 통해 세밀한 데이터 접근 제어를 구현할 수 있습니다.

권한 부여 프로세스는 크게 두 단계로 이루어집니다:

1. 사용자에게 데이터베이스 접근 권한 부여하기 (Grant Privilege)
2. 부여된 권한 내에서 태그 기반 접근 제어 설정하기 (Access Type)

1. Access Control 메뉴에서 접근 권한을 설정할 사용자를 선택하고 Grant Permission 으로 권한을 부여합니다. 
2. 부여된 권한 목록을 클릭하면 Privilege Details 화면이 표시됩니다.
3. Access Type 섹션에서 Tag-based Table Access 옵션을 선택합니다. 기본값(Default)은 All Table Access 옵션으로 설정되어 있습니다. 이 옵션은 모든 테이블에 접근 권한을 부여합니다.Tag-based Table Access 옵션을 선택하면 특정 태그를 가진 테이블에만 접근을 허용하는 whitelist 방식으로 변경됩니다.
  1. 기본값(Default)은 All Table Access 옵션으로 설정되어 있습니다. 이 옵션은 모든 테이블에 접근 권한을 부여합니다.
  2. Tag-based Table Access 옵션을 선택하면 특정 태그를 가진 테이블에만 접근을 허용하는 whitelist 방식으로 변경됩니다.

## 권한 적용 결과
태그 기반 테이블 접근 권한이 설정되면:

1. 사용자는 설정된 태그가 할당된 테이블에만 접근할 수 있습니다.
2. 해당 태그가 없는 테이블에는 접근이 제한됩니다.

## 사용 사례
태그 기반 테이블 접근 권한은 다음과 같은 상황에 유용합니다:

1. 부서별 데이터 접근 관리: 각 부서에 관련된 테이블에 특정 태그를 할당하고, 해당 부서 사용자에게 그 태그를 가진 테이블만 접근하도록 설정할 수 있습니다.
2. 프로젝트별 접근 제어: 프로젝트 관련 테이블에 프로젝트 태그를 할당하고, 프로젝트 참가자에게만 해당 태그를 가진 테이블에 접근 권한을 부여할 수 있습니다.
3. 데이터 민감도 기반 접근 제어: 데이터 민감도에 따라 테이블에 태그를 할당하고, 적절한 권한을 가진 사용자에게만 접근을 허용할 수 있습니다.

## 주의사항
1. 태그 기반 접근 제어는 whitelist 방식으로 작동하므로, 설정된 태그가 없는 테이블에는 접근이 불가능합니다.
2. 여러 태그를 추가할 경우, 해당 태그 중 하나라도 가진 테이블에 접근할 수 있습니다.
3. 태그 설정은 Data Paths 메뉴에서 관리되므로, 접근 제어 설정 전에 테이블에 적절한 태그가 할당되어 있어야 합니다.
4. 접근 권한 변경 사항은 저장 후 즉시 적용됩니다.
