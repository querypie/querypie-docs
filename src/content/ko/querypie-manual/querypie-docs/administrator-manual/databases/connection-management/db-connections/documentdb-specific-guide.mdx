Amazon DocumentDB 전용 상세 설정 가이드를 이곳에서 제공합니다.

## Cloud 동기화하는 경우 커넥션 클러스터 구조 조정
클라우드 동기화를 통해 생성된 클러스터 정보를 확인하며, 클러스터 엔드포인트, 읽기 전용 엔드포인트, 인스턴스 엔드포인트를 각각 용도에 맞게 접근할 수 있는 기능으로, 멀티 호스트 환경에서도 효율적으로 작동하도록 설계되었습니다. 해당 기능은 관리자 페이지 &gt; Databases &gt; DB Connections에서 설정할 수 있습니다.

클라우드 동기화 후 아래 화면과 같이 첫번째 클러스터에 Cluster endpoint 주소, 두번째 클러스터에 읽기 전용 endpoint 주소, 세번째 클러스터에 인스턴스 endpoint 주소를 사용한 멀티호스트 connection string을 보여줍니다. 인스턴스 endpoint로 접속하는 것보다 Cluster endpoint 를 사용하는것을 권고합니다.

## Amazon DocumentDB TLS(SSL) 사용하기
AWS에서 새로운 DocumentDB를 생성하면 TLS를 사용하여 전송구간 암호화를 사용할 수 있고 사용자가 선택적으로 옵션을 끌 수 있습니다. Amazon DocumentDB 클러스터에 대한 전송 중 데이터 암호화는 클러스터 파라미터 그룹의 TLS 파라미터를 통해 관리됩니다. AWS Management Console 또는 AWS Command Line Interface (AWS CLI)를 사용하여 Amazon DocumentDB 클러스터 TLS 설정을 관리할 수 있습니다. 참고Amazon DocumentDB에서 TLS가 활성화 되어 있는 경우 접속을 위해 AWS에서 제공하는 CA 번들 인증서가 필요합니다.

### CA 번들 인증서 등록하기
AWS에서는 region에 상관없이 공동으로 사용할 수 있는 global 번들 인증서와 region별 번들 인증서 두가지 종류를 제공합니다.

1. 번들 인증서를 다운로드 받습니다.
2. QueryPie 관리자 콘솔에서 Databases > Connection Management > SSL Configurations 메뉴로 이동합니다.

1. 우측 상단에 있는 Create SSL 버튼을 누릅니다.
2. Name 항목에 식별이 용이하도록 이름을 지정합니다.
3. SSL Mode에서 Required를 선택합니다.
4. 다운로드 받은 번들인증서 (확장명 .pem 파일)를 텍스트 편집기로 열고 전체 내용을 복사해서 CA Certificate 항목에 붙여 넣습니다.
5. Save 버튼을 눌러 설정을 저장합니다.

### DocumentDB에 인증서 매핑하기
1. Adminstrator > Databases > Connection Management > DB Connections 메뉴로 이동합니다.
2. 클라우드 동기화를 통해 생성되어 있는 DocumentDB 커넥션을 선택합니다.
3. 아래로 스크롤하여 SSL / SSH Setting 탭으로 이동합니다.
4. Use SSL 체크박스를 체크하여 활성화시킨 뒤 SSL Configurations에서 앞단계(CA 번들 인증서 등록하기)에서 등록한 설정 이름을 선택합니다.

1. 우측상단의 Save Changes 버튼을 눌러 설정을 저장합니다.
