QueryPie WAC을 통한 Web Apps에 대한 JIT(Just-in-Time) 권한 획득 사용법을 안내하겠습니다.

JIT 권한 획득은 아래와 같은 순서로 이루어집니다.

1. QueryPie WAC에 Web App을 등록합니다.
2. Web App 하위에 Owner와 Member를 등록합니다.
3. 이용자가 접속할 Web App에 대한 접근 신청을 합니다.
4. Owner로 등록된 결재권자가 이용자의 Web App 접속을 승인합니다.

안내

JIT 권한 획득 Guide는 10.3.0 버전을 기준으로 설명합니다.

이 가이드를 따라하려면 QueryPie 관리자 권한 중 Owner 또는 Web App Admin 권한이 필요합니다.

none
# Admin-side
## 1. 웹 앱 등록하기
1. Admin > Web Apps > Connection Management > Web Apps 메뉴로 진입합니다.
2. Create a Web App 버튼을 클릭하면 웹 앱 등록 페이지로 진입합니다.

다음의 정보를 입력합니다.

1. Name : QueryPie Web Site
2. Base URL : www.querypie.com 또는 10.10.10.10:443 Base URL에 하위 경로(예: /ko)를 포함할 수 없습니다.Base URL 입력시 https:// 는 제외하는 것을 권장합니다.
  1. Base URL에 하위 경로(예: /ko)를 포함할 수 없습니다.
  2. Base URL 입력시 https:// 는 제외하는 것을 권장합니다.
3. Description : 웹 앱에 대한 설명을 입력하세요. (예: 쿼리파이 웹사이트)
4. URL Paths : 하위 경로를 입력합니다. 여기서는 비워 둡니다.
5. Watermark : 웹 앱 접속 시 사용자의 브라우저 화면에 워터마크를 적용할지 여부를 선택합니다.웹 앱 접속시 브라우저에 접속자, 접속일시 등의 정보를 표시함으로써 화면 유출을 방지합니다.가이드에서는 On 상태를 가정하고 안내하겠습니다.
  1. 웹 앱 접속시 브라우저에 접속자, 접속일시 등의 정보를 표시함으로써 화면 유출을 방지합니다.
  2. 가이드에서는 On 상태를 가정하고 안내하겠습니다.
6. User Activity Recording : 사용자 행위 기록 여부On으로 활성화 후 모든 옵션을 켜주세요.Excluded URL Paths는 사용자 행위 기록을 제외할 경로를 입력합니다. 여기서는 비워 둡니다.
  1. On으로 활성화 후 모든 옵션을 켜주세요.
  2. Excluded URL Paths는 사용자 행위 기록을 제외할 경로를 입력합니다. 여기서는 비워 둡니다.
7. Tag : 웹 앱에 대한 태그입니다. 여기서는 비워 둡니다.
8. Save 버튼을 눌러 저장합니다.

## 2. Web App Owner / Member 등록하기
1. 웹 앱 상세 페이지로 접속합니다
2. 우측 상단 "Owner/Member" 버튼을 클릭합니다.
3. 우측의 드로워 창이 열리고, 대상자를 검색하여 "Assign as" 열에서 왼쪽 Owner와 오른쪽 Member 버튼을 선택하여 역할을 부여합니다.

JIT(Just-in-Time) 권한 부여에는 아래 두 역할이 있습니다.

* Owner: 이 웹 앱에 대한 Just-in-time 요청을 승인할 수 있는 주체
* Member: 이 웹 앱에 대한 Just-in-time 요청을 상신할 수 있는 주체

## 3. 이용자의 JIT Web App 접속 권한 신청
QueryPie를 통해 Web App 접속시, Root CA 인증서 설치 및 Chrome의 Extension의 설치가 필요합니다.

설치 방법은 아래 매뉴얼을 참고해주세요.

https://querypie.atlassian.net/wiki/spaces/QM/pages/783417593/WAC+Quickstart#1.-Root-CA-%EC%9D%B8%EC%A6%9D%EC%84%9C-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0

https://querypie.atlassian.net/wiki/spaces/QM/pages/783417593/WAC+Quickstart#2.-Extension-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C-%EB%B0%9B%EA%B8%B0

https://querypie.atlassian.net/wiki/spaces/QM/pages/783417593/WAC+Quickstart#3.-Extension-%EC%84%A4%EC%B9%98-%EB%B0%8F-Host-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0

1. QueryPie 접속 후, 상단의 Web Apps을 클릭합니다.
2. 좌측 Role을 클릭하여 “Just In Time Role”을 선택합니다.
3. 접속하려는 서버를 클릭합니다.
4. 표시되는 알럿의 “Request Access”를 클릭하여 Workflow로 이동합니다.

1. Web App Just-In-Time Access Request에 접속합니다.
2. Step1을 작성합니다. Web Apps에서 할당받은 항목을 클릭한 경우, 별도의 선택이 필요하지 않습니다.Web App : 이용자가 Member로 지정된 항목만 선택이 가능합니다.Approvers : Owner로 지정된 User를 표시합니다.
  1. Web App : 이용자가 Member로 지정된 항목만 선택이 가능합니다.
  2. Approvers : Owner로 지정된 User를 표시합니다.
3. Step2를 작성합니다.Request Title : 신청 제목을 입력합니다.Access Duration (Minutes) : 사용 시간을 입력합니다. 분 단위로 신청됩니다.Reason for Request : 신청 사유를 입력합니다.
  1. Request Title : 신청 제목을 입력합니다.
  2. Access Duration (Minutes) : 사용 시간을 입력합니다. 분 단위로 신청됩니다.
  3. Reason for Request : 신청 사유를 입력합니다.
4. Submit 을 클릭합니다.

JIT(Just-in-Time) 권한 신청시 아래와 같은 제약사항이 있습니다.

* 승인자는 Web App Owner로 고정되어 있습니다.
* 승인 조건은 여러 명의 승인자 중 최소 1명이 승인하면 완료되도록 고정됩니다.
* 승인 단계 추가나 승인자 변경은 제한됩니다.
* 사후 승인 모드는 Approval Configuration 에서 활성화된 경우에 나타나며 Off하면 요청 화면에서 나타나지 않습니다.

## 4. 결재권자의 JIT Web App 접속 권한 요청 승인
1. (Web App Owner로 지정된) 결재권을 가진 사용자가 Workflow로 접속합니다.
2. Received Requests > To Do 로 이동합니다.
3. 신청 내용을 클릭하여 Detail 페이지로 이동합니다.
4. 상단의 Approve를 클릭합니다.

## 5. QueryPie를 통하여 웹 앱 접근하기
1. QueryPie Web Apps로 이동합니다.
2. 좌측 상단의 Role을 클릭하여 Just In Time Role로 변경합니다.
3. Web App Dashboard 내 My Apps에 앞에서 신청한 QueryPie Web Site 앱 아이콘에 “JIT Active”가 보일 것입니다. 아이콘을 클릭하면 웹사이트로 접속합니다.
4. 신청한 시간이 만료되면 접속 권한은 자동으로 회수됩니다.
