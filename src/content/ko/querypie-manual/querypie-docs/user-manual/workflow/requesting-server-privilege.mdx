## Overview
Server Privilege Request를 사용하면 서버에 대한 임시 명령어 사용 권한을 쉽게 요청할 수 있습니다. 임시 명령어 사용 시간과 권한 시작 시점(승인 즉시 또는 서버 접속 시점부터)를 선택 신청할 수 있습니다. 이 기능은 SSH 프로토콜 통신만 지원합니다.

## Server Privilege Request
### 1. 결재 규칙 선택하기
* Approval Rule을 선택하여 목적에 맞는 결재 규칙을 선택하세요. 선택한 규칙에 따라 승인 대상이 달라집니다.
* 만약 관리자가 승인자를 지정한 결재 규칙이 선택된 경우, 자동으로 승인자가 지정되며 추가 및 변경이 불가합니다.

### 2. 승인자 지정하기
* 결재 라인에서 + 버튼을 누르면 단계별 승인자를 지정할 수 있는 팝업창이 표시됩니다.
* 이 팝업창에서 결재 승인 조건 및 승인자를 추가 후 Save 버튼을 눌러 결재 라인을 저장합니다.
* 선택 가능한 승인 조건은 다음과 같습니다.A single Assignee can complete the approval request : 여러 명 중 한 명의 승인만으로 결재 요청이 승인 처리됩니다.All Assignees must approve this request : 모든 승인자가 승인하여야 결재 요청이 승인 처리됩니다.
  * A single Assignee can complete the approval request : 여러 명 중 한 명의 승인만으로 결재 요청이 승인 처리됩니다.
  * All Assignees must approve this request : 모든 승인자가 승인하여야 결재 요청이 승인 처리됩니다.

### 3. 참조자 지정하기
* 결재 라인에서 + 버튼을 누르면 참조자를 지정할 수 있는 팝업창이 표시됩니다.관리자가 참조자 지정을 허용하지 않은 경우에는 Reviewer 박스가 표시되지 않습니다.
  * 관리자가 참조자 지정을 허용하지 않은 경우에는 Reviewer 박스가 표시되지 않습니다.
* 이 팝업창에서 결재 승인 조건 및 승인자를 추가합니다.
* Save 버튼을 눌러 모달을 닫고 참조자 지정을 완료합니다.

### 4. 사후 승인으로 요청 보내기
* 사후 승인 기능이 허용된 결재 규칙을 선택한 경우 Urgent Mode 스위치가 표시됩니다.
* Urgent mode = On 으로 설정 후 결재 요청을 등록하면 즉시 권한을 부여받거나 작업을 수행할 수 있습니다.

Q. Urgent Mode 스위치가 보이지 않아요.

A. 관리자가 Urgent Mode를 허용하지 않은 결재 규칙을 선택한 경우, 해당 기능이 표시되지 않습니다.

### 5. 요청 대상 Role 선택하기
* Role 하단의 select box를 클릭합니다.
* 사용자에게 부여된 Role 중 하나를 선택합니다.

### 6. 요청 대상 서버 선택하기
* Server List 우측의 Add Server를 클릭하면 서버를 선택할 수 있는 팝업창이 나타납니다.
* 선택할 수 있는 서버는 “5. 요청 대상 Role 선택하기”에서 선택한 Role에 따라 달라집니다.
* Add 버튼을 클릭하여 모달을 닫고 서버 선택을 완료합니다.

### 7. 사용할 Commands 입력하기
* 관리자의 설정에 따라 명령어 입력 방식이 달라집니다. 
* Command Template 직접 입력 시관리자가 Allow Pre-defined Command Templates Only 옵션을 비활성화한 경우, Commands 입력란이 표시됩니다. 임시 사용을 신청할 명령어를 입력합니다.Commands에 임시 사용을 신청할 명령어를 입력합니다.Keyword : 명령어를 키워드로 입력할 수 있습니다.RegEx : 명령어를 정규 표현식 형태로 입력할 수 있습니다.
  * 관리자가 Allow Pre-defined Command Templates Only 옵션을 비활성화한 경우, Commands 입력란이 표시됩니다. 임시 사용을 신청할 명령어를 입력합니다.
  * Commands에 임시 사용을 신청할 명령어를 입력합니다.Keyword : 명령어를 키워드로 입력할 수 있습니다.RegEx : 명령어를 정규 표현식 형태로 입력할 수 있습니다.
    * Keyword : 명령어를 키워드로 입력할 수 있습니다.
    * RegEx : 명령어를 정규 표현식 형태로 입력할 수 있습니다.

* Command Template 선택 시관리자가 Allow Pre-defined Command Templates Only 옵션을 활성화한 경우, Commands를 직접 입력하는 대신 Command Template 선택 상자가 나타납니다.드롭다운 목록에서 사용할 권한이 담긴 템플릿을 선택합니다.템플릿을 선택하면 포함된 명령어(Keyword, RegEx)가 화면에 표시되지만, 직접 수정할 수는 없습니다.
  * 관리자가 Allow Pre-defined Command Templates Only 옵션을 활성화한 경우, Commands를 직접 입력하는 대신 Command Template 선택 상자가 나타납니다.드롭다운 목록에서 사용할 권한이 담긴 템플릿을 선택합니다.템플릿을 선택하면 포함된 명령어(Keyword, RegEx)가 화면에 표시되지만, 직접 수정할 수는 없습니다.
    1. 드롭다운 목록에서 사용할 권한이 담긴 템플릿을 선택합니다.
    2. 템플릿을 선택하면 포함된 명령어(Keyword, RegEx)가 화면에 표시되지만, 직접 수정할 수는 없습니다.

Q. 선택할 수 있는 템플릿이 없다고 나옵니다.

A. 관리자가 워크플로우에서 사용하도록 허용한 템플릿이 없는 경우입니다. 관리자한테 설정 확인 요청을 해야합니다. 

### 8. Server Privilege 사용 시간 입력하기
* Privilege Start Trigger : Server Privilege 적용 시간인 Privilege Duration의 시작 트리거를 선택할 수 있습니다.Access to Server : Server Privilege 적용 후, 적용된 사용자가 서버 접속 시작부터 시간을 카운트합니다.Grant : Server Privilege 부여 시점부터 Server Privilege 사용 가능 시간을 카운트 합니다. Request가 승인이 되면 QueryPie에서 자동으로 Server Privilege을 부여합니다. 
  * Access to Server : Server Privilege 적용 후, 적용된 사용자가 서버 접속 시작부터 시간을 카운트합니다.
  * Grant : Server Privilege 부여 시점부터 Server Privilege 사용 가능 시간을 카운트 합니다. Request가 승인이 되면 QueryPie에서 자동으로 Server Privilege을 부여합니다. 
* Privilege Duration : Server Privilege 적용 시간을 설정합니다. 분단위로 시간을 입력할 수 있습니다. Privilege Start Trigger에 따라서 시작하는 시점이 달라집니다.

### 9. 요청 정보 입력하기
* Title : 요청 제목을 입력합니다.
* Reason for Request : 커넥션 접근 권한을 요청하는 사유를 입력합니다.
* Submit : 요청을 모두 작성하였다면 Submit 버튼을 눌러 상신을 완료합니다.

접근 권한을 부여받은 서버에 접속하는 방법은 권한이 있는 서버에 접속하기 문서를 참고해 주세요.
