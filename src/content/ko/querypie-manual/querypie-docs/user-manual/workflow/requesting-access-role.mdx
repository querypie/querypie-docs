import { Callout } from 'nextra/components'

## Overview
Access Role Request는 접근이 필요한 서버 또는 쿠버네티스 클러스터에 대해 역할(Role)을 간편하게 요청할 수 있습니다. 승인 즉시 역할이 부여되며, 역할에서 허용하는 서버 또는 쿠버네티스 클러스터에 접속할 수 있습니다.

## Access Role Request
### 1. 결재 규칙 선택하기
* Approval Rule을 선택하여 목적에 맞는 결재 규칙을 선택하세요. 선택한 규칙에 따라 승인 대상이 달라집니다.
* 만약 관리자가 승인자를 지정한 결재 규칙이 선택된 경우, 자동으로 승인자가 지정되며 추가 및 변경이 불가합니다.

<p align="center">
<div>[image-20240807-130008.png]()</div>
</p>

### 2. 승인자 지정하기
* 결재 라인에서 + 버튼을 누르면 단계별 승인자를 지정할 수 있는 팝업창이 표시됩니다.
* 이 팝업창에서 결재 승인 조건 및 승인자를 추가 후 Save 버튼을 눌러 결재 라인을 저장합니다.
* 선택 가능한 승인 조건은 다음과 같습니다. A single Assignee can complete the approval request : 여러 명 중 한 명의 승인만으로 결재 요청이 승인 처리됩니다.All Assignees must approve this request : 모든 승인자가 승인하여야 결재 요청이 승인 처리됩니다.
  * A single Assignee can complete the approval request : 여러 명 중 한 명의 승인만으로 결재 요청이 승인 처리됩니다.
  * All Assignees must approve this request : 모든 승인자가 승인하여야 결재 요청이 승인 처리됩니다.

<p align="center">
<div>[image-20240807-130021.png]()</div>
</p>

### 3. 참조자 지정하기
* 결재 라인에서 + 버튼을 누르면 참조자를 지정할 수 있는 팝업창이 표시됩니다. 관리자가 참조자 지정을 허용하지 않은 경우에는 Reviewer 박스가 표시되지 않습니다.
  * 관리자가 참조자 지정을 허용하지 않은 경우에는 Reviewer 박스가 표시되지 않습니다.
* 이 팝업창에서 결재 승인 조건 및 승인자를 추가합니다.
* Save 버튼을 눌러 모달을 닫고 참조자 지정을 완료합니다.

<p align="center">
<div>[image-20240807-130031.png]()</div>
</p>

### 4. 사후 승인으로 요청 보내기
* 사후 승인 기능이 허용된 결재 규칙을 선택한 경우 Urgent Mode 스위치가 표시됩니다.
* Urgent mode = On 으로 설정 후 결재 요청을 등록하면 즉시 권한을 부여받거나 작업을 수행할 수 있습니다.

<p align="center">
<div>[image-20240807-130043.png]()</div>
</p>

<Callout>
**Q. Urgent Mode 스위치가 보이지 않아요.** 
A. 관리자가 Urgent Mode를 허용하지 않은 결재 규칙을 선택한 경우, 해당 기능이 표시되지 않습니다. 
</Callout>

### 5. 요청 대상 역할(Role) 선택하기
<p align="center">
<div>[스크린샷 2024-08-02 오전 11.10.18.png]()</div>
*QueryPie Web &gt; Workflow &gt; Submit Request &gt; Access Role Request &gt; Step 2*
</p>

1. Service : 요청 대상 서비스를 선택합니다. 서버 접근 제어 또는 쿠버네티스 접근 제어를 선택할 수 있습니다.
2. Role : 선택한 서비스에 따라 표시되는 역할 목록에서 요청할 역할을 선택합니다. (단일 선택)
3. 선택한 서비스와 역할에 따라 목록에서 아래 정보가 표시됩니다. Server Access Control : 접근 가능한 각 서버그룹명, 서버명, 어카운트명Kubernetes Access Control : 접근 가능한 쿠버네티스 클러스터명, 플랫폼, API URL
  1. Server Access Control : 접근 가능한 각 서버그룹명, 서버명, 어카운트명
  2. Kubernetes Access Control : 접근 가능한 쿠버네티스 클러스터명, 플랫폼, API URL

<Callout>
Access Role Request는 한 번에 하나의 역할만 요청할 수 있습니다. 역할 별 별도의 결재 요청이 필요하므로, 권한 관리를 강화할 수 있습니다. 
</Callout>

### 6. 요청 정보 입력하기
<p align="center">
<div>[스크린샷 2024-08-02 오전 11.14.05.png]()</div>
*QueryPie Web &gt; Workflow &gt; Submit Request &gt; Access Role Request &gt; Step 3*
</p>

* Title : 요청 제목을 입력합니다.
* Expiration Date : 해당 권한이 회수되는 만료 일자를 선택합니다.만료 일자는 필수 값이며, 따로 설정하지 않으면 1년 뒤 일자로 기본 선택됩니다.적절한 커넥션 접근 권한 관리를 위해 필요한 기간만큼 요청하는 것을 권장합니다.
  * 만료 일자는 필수 값이며, 따로 설정하지 않으면 1년 뒤 일자로 기본 선택됩니다.
  * 적절한 커넥션 접근 권한 관리를 위해 필요한 기간만큼 요청하는 것을 권장합니다.
* Reason for Request : 접근 권한을 요청하는 사유를 입력합니다.
* Submit : 요청을 모두 작성하였다면 Submit 버튼으로 요청 상신을 완료합니다.
