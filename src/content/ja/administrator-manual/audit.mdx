---
title: 'Audit'
---

## Overview

QueryPie内で起こるすべての活動は監査ログに記録されます。ユーザーと管理者のログイン/ログアウト、権限付与と回収、DB、サーバーおよびKubernetesに対するアクセス、クエリまたはコマンド実行、リソースまたはセキュリティ設定変更などQueryPieとアクセス制御対象リソースで発生するすべての活動履歴がロギング対象です。


## 提供機能

*  **監査ログ抽出**  :  **Audit Log Export** メニューで監査ログをファイル形式で抽出して保存できます。 
*  **レポート出力**  :  **Report** メニューでQueryPieのデータ現況をレポート形式で出力できます。
*  **監査ログ照会**  : Auditメニュー下の **個別ログページ** でログのリアルタイム照会、検索およびフィルタリングが可能です。


## 照会可能な監査ログ種類

1. 個別ログページ内目録でリアルタイムに保存されるログを確認できます。(最新順でソート)
2. 特定カラムの値でログを検索またはフィルタリングできます。 
3. 目録で特定ログをクリックするとDrawerで詳細情報を確認できます。

照会可能な監査ログの種類は保有しているライセンスに応じて構成が変わり、ライセンス別提供されるログの種類は以下の通りです。

<table data-table-width="760" data-layout="default" local-id="2eeba34f-b909-48ea-a011-5381931efcd4">
<tbody>
<tr>
<th>
**共通ログ**
</th>
<th>
**DAC専用ログ**
</th>
<th>
**SAC専用ログ**
</th>
<th>
**KAC専用ログ**
</th>
</tr>
<tr>
<td>
**General**
* User Access History
* Activity Logs
* Admin Role History
* Workflow Logs
* Reverse Tunnels
</td>
<td>
**Databases**
* DB Access History
* Query Audit
* Running Queries
* DML Snapshot
* Account Lock History
* Access Control Logs
</td>
<td>
**Servers**
* Server Access History
* Command Audit
* Session Logs
* Session Monitoring
* Access Control Logs
* Server Role History
* Account Lock History
</td>
<td>
**Kubernetes**
* Request Audit
* Pod Session Recordings
* Kubernetes Role History
</td>
</tr>
</tbody>
</table>

**1. General**

* User Access History : ユーザーログイン、ログアウト履歴
* Activity Logs : 管理者が実行するリソース登録および設定変更履歴 
* Admin Role History : 管理者権限付与、変更、回収履歴
* Workflow Logs : ワークフロータイプ別作業の状態変更(要求、承認、拒否など)履歴
* Reverse Tunnels : 現在接続中のリバーストンネリングセッション全体モニタリング (Reverse Tunnel Agentモニタリング)


**2. Databases**

* DB Access History : コネクション接続および接続解除履歴
* Query Audit : 実行が終わったクエリ実行履歴
* Running Queries : 現在実行中のクエリ 
* DML Snapshot : INSERT / UPDATE / DELETEクエリ実行完了時前後データ記録 (記録のため別途設定必要)
* Account Lock History : パスワード失敗および長期未接続によるコネクションロック履歴
* Access Control Logs : コネクションアクセス権限付与および回収履歴


**3. Servers**

* Server Access History : サーバー接続および接続解除履歴
* Command Audit : 実行が終わったコマンド実行履歴 
* Session Logs : 個別セッション履歴およびセッションリプレイ機能提供 
* Session Monitoring : 現在接続中のセッション全体モニタリング (必要時管理者がセッション強制終了可能) 
* Access Control Logs : Direct PermissionおよびWorkflowを通じたサーバーアクセス権限付与および回収履歴
* Server Role History : Roleメニューを通じたサーバーアクセス権限付与および回収履歴
* Account Lock History : サーバー接続アカウントロック履歴 


**4. Kubernetes**

* Request Audit : Kubernetes APIサーバー呼び出し内訳
* Pod Session Recordings : Pod Execなどの接続セッション内行為録画内訳
* Kubernetes Role History : Kubernetesアクセス権限付与および回収履歴


