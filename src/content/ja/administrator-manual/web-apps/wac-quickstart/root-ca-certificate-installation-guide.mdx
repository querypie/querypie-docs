---
title: 'Root CA証明書インストールガイド'
---

import { Callout } from 'nextra/components'

# Root CA証明書インストールガイド

WACを通じたWebアプリケーションアクセス制御を利用するには、ユーザーのローカルPCにRoot CA証明書のインストールが必要です。

### 1. 証明書のダウンロード

Webブラウザに以下のパスを入力すると、環境に適したRoot CA証明書がダウンロードされます。
```
{QueryPie_Host}/api/user/wac/certificate/download
```

### 2. 証明書のインストール

ローカルPCにダウンロードしたRoot CA証明書をインストールします。

<Callout type="info">
証明書設定のためにAdministrator Privilegeが必要です。
</Callout>

#### MacOS

キーチェーンアクセスアプリでRoot CA証明書をインストールできます。

1. Spotlight > キーチェーンアクセスアプリを実行します。
2. キーチェーンアクセスアプリ画面に、ダウンロードした証明書ファイルをドラッグして貼り付けます。新規インストールされたquerypie証明書は信頼された状態ではありません。
3. querypie証明書をダブルクリックしてモーダルを開き、信頼項目をクリックして折りたたまれた領域を展開した後、**この証明書使用時** : `システム初期設定使用` を `常に信頼` に変更し、モーダルを閉じます。
4. システム証明書信頼設定変更のために追加認証を実行します。
5. 新規インストールされたquerypie証明書はすべてのユーザーに対して信頼されたものとして表示されます。

またはTerminalで以下のコマンドを実行して同様に設定できます。
```
cd {Root CA Downloaded Path}
sudo security add-trusted-cert -d -r trustRoot -k /Library/Keychains/System.keychain qp-wac-rootCA.cer
```

#### Windows

証明書インポートウィザードを通じてRoot CA証明書をインストールできます。

1. WindowsエクスプローラーでダウンロードしたRoot CA証明書があるフォルダを開きます。
2. 証明書ファイルに対して右クリックし、コンテキストメニューで `証明書インストール(I)` を選択して証明書インポートウィザードを開始します。
3. 証明書インポートウィザードウィンドウが開いたら、保存場所を `現在のユーザー(C)` で選択し、`次へ(N)` ボタンをクリックします。
4. 証明書保存場所について、`すべての証明書を以下の保存場所に保存(P)` オプションを選択し、`参照(R)...` ボタンをクリックします。 
5. **証明書保存場所選択** モーダルが開いたら、信頼できるルート証明機関を選択します。実際の保存場所表示オプションは解除状態を維持します。確認ボタンをクリックします。
6. 証明書保存場所設定を確認し、`次へ(N)` ボタンをクリックします。
7. 設定した内容を確認し、`完了(F)` ボタンを押します。
8. セキュリティ警告モーダルが出力されます。`はい(Y)` ボタンを押すと即座に証明書インポートが実行されます。インポート完了モーダルで確認ボタンをクリックします。

### 3. Chrome証明書設定確認

証明書が正常に設定されたかどうかを確認する方法は以下の通りです。

1. Chromeブラウザで `chrome://certificate-manager/localcerts` を開きます。
2. **macOSからインポートした証明書表示またはWindowsからインポートした証明書表示** をクリックします。
3. 信頼できる証明書リストでquerypie証明書を確認します。


