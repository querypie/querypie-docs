import { Callout } from 'nextra/components';

# QueryPie Client

QueryPieプラットフォームと接続して、データベースとサーバーに安全にアクセスできます。

<Callout >
QueryPie Client MCPは現在、ユーザー機能のみを提供しています。
</Callout>

## 主な機能
- QueryPie DAC（Data Access Control）を通じたデータベースアクセス
- QueryPie SAC（Security Access Control）を通じたサーバーアクセス

## 基本情報

### 認証方式
QueryPieプラットフォームのユーザー名とパスワードを使用して認証します。

### 入力パラメータ
- **Server URL**（必須）：QueryPie APIサーバーURL
- **Username**（必須）：QueryPieユーザー名
- **Password**（必須）：QueryPieパスワード

## サポートするMCPツール
現在、DAC、SAC関連ツールをサポートしています。

### DAC（Data Access Control）ツール
QueryPieのデータアクセス制御機能を通じてデータベースアクセスを管理します。

<Callout type="info">
QueryPie Client MCPは、QueryPieでProxy Usageオプションが有効になっているデータベースに対してのみ動作します。
</Callout>

#### list_accessible_db_cloud_providers
利用可能なすべてのクラウドプロバイダーのリストを取得します。

#### list_accessible_db_cluster_groups
特定のクラウドプロバイダーに対してアクセス可能なデータベースクラスターグループのリストを取得します。

**入力パラメータ：**
- `cloudProviderUuid`（必須）：クラウドプロバイダーUUID

#### list_accessible_db_clusters
特定のクラスターグループに対してアクセス可能なデータベースクラスターのリストを取得します。クエリを実行するにはクラスターを選択する必要があります。

**入力パラメータ：**
- `clusterGroupUuid`（必須）：クラスターグループUUID

#### run_db_query
データベースでSQLクエリを実行します。

**入力パラメータ：**
- `clusterUuid`（必須）：クラスターUUID
- `proxyHost`（必須）：プロキシホスト
- `proxyPort`（必須）：プロキシポート
- `query`（必須）：実行するSQLクエリ

### SAC（Security Access Control）ツール
QueryPieのセキュリティアクセス制御機能を通じてサーバーアクセスを管理します。

<Callout type="info">
QueryPie Client MCPは、Linux系のサーバーに対してのみ動作します。
</Callout>

#### list_accessible_server_roles
アクセス可能なすべてのサーバーロールのリストを取得します。次のコマンドで使用するロールを選択する必要があります。

#### list_accessible_server_groups
アクセス可能なすべてのサーバーグループのリストを取得します。

**入力パラメータ：**
- `roleUuid`（必須）：ロールUUID

#### list_accessible_servers
アクセス可能なすべてのサーバーのリストを取得します。

**入力パラメータ：**
- `roleUuid`（必須）：ロールUUID
- `serverGroupUuid`（必須）：サーバーグループUUID

#### list_server_accounts
サーバーアカウントのリストを取得します。サーバーに接続するために使用できるすべてのアカウントのリストです。

**入力パラメータ：**
- `roleUuid`（必須）：ロールUUID
- `serverUuid`（必須）：サーバーUUID

#### run_server_command
サーバーでコマンドを実行します。

**入力パラメータ：**
- `roleUuid`（必須）：ロールUUID
- `host`（必須）：サーバーホスト
- `port`（必須）：サーバーポート
- `username`（必須）：ユーザー名
- `command`（必須）：実行するコマンド

## 使用例

例えば、
- プロンプトで「QueryPieを通じてアクセスできるデータベースのリストを教えて」と入力すると、
- LLMはQueryPie MCPで`list_accessible_db_cloud_providers`、`list_accessible_db_cluster_groups`、`list_accessible_db_clusters`ツールを順次呼び出した後、呼び出し結果に基づいて回答します。

## 注意事項
- QueryPieユーザー名とパスワードは安全に保管してください。
- 適切な権限設定を通じてセキュリティを維持してください。
- データアクセス時は組織のセキュリティポリシーを遵守してください。
- 定期的にアクセスログを確認してください。 