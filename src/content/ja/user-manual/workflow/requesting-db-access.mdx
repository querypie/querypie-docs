---
title: 'DB Access Request要求'
---

import { Callout } from 'nextra/components'

# DB Access Request要求

### Overview

下記順序に従ってアクセスが必要なDBコネクションに対するPrivilegeを要求できます。要求後承認が完了すると即座に権限が付与され、QueryPie WebにあるSQL EditorまたはAgentを通じて権限を受けたコネクションに接続できます。


### DB Access Request要求

#### 1. 決裁ルール選択

* Approval Ruleを選択して目的に合う決裁ルールを選択してください。選択したルールに応じて承認対象が変わります。 
* もし管理者が承認者を指定した決裁ルールが選択された場合、自動で承認者が指定され追加および変更が不可能です。
*  **Approval Expiration Date** : 承認期限切れ日を入力します。Maximum Approval Durationを通じて最大値を設定できます。Approval Expiration DateはAccess Expiration Dateを超過できません。超過した場合、上申できません。Maximum Approval Duration &gt; Maximum Access Durationの場合、Maximum Approval Durationの値がMaximum Access Durationの値と同一に適用されます。例) Maximum Approval Durationは14日でMaximum Access Durationは5日の場合、Maximum Approval Durationの値も5日に適用されます。 
    * ただし、Urgent Modeで上申時、上記条件を無視します。

<figure data-layout="center" data-align="center">
![Screenshot-2025-08-26-at-12.21.07-AM.png](/user-manual/workflow/requesting-db-access/Screenshot-2025-08-26-at-12.21.07-AM.png)
</figure>

#### 2. 承認者指定

* 決裁ラインで`+`ボタンを押すと段階別承認者を指定できるポップアップウィンドウが表示されます。 
* このポップアップウィンドウで決裁承認条件および承認者を追加後`Save`ボタンを押して決裁ラインを保存します。
* 選択可能な承認条件は以下の通りです。 
    * A single Assignee can complete the approval request : 複数名中一人の承認だけで決裁要求が承認処理されます。
    * All Assignees must approve this request : すべての承認者が承認しなければ決裁要求が承認処理されます。

<figure data-layout="center" data-align="center">
![screenshot-20240724-154729.png](/user-manual/workflow/requesting-db-access/screenshot-20240724-154729.png)
</figure>

#### 3. 参照者指定

* 決裁ラインで`+`ボタンを押すと参照者を指定できるポップアップウィンドウが表示されます。 
    * 管理者が参照者指定を許可しない場合はReviewerボックスが表示されません。 
* このポップアップウィンドウで決裁承認条件および承認者を追加します。 
* `Save`ボタンを押してモーダルを閉じ参照者指定を完了します。

<figure data-layout="center" data-align="center">
![screenshot-20240724-171350.png](/user-manual/workflow/requesting-db-access/screenshot-20240724-171350.png)
</figure>

#### 4. 事後承認で要求送信

<Callout type="info">
11.3.0から事後承認で要求する場合決裁期限切れ日を指定できないように変更されました。
</Callout>

* 事後承認機能が許可された決裁ルールを選択した場合Urgent Modeスイッチが表示されます。 
* Urgent mode = Onに設定後決裁要求を登録すると即座に権限を付与されたり作業を実行できます。

<figure data-layout="center" data-align="center">
![screenshot-20240523-184245.png](/user-manual/workflow/requesting-db-access/screenshot-20240523-184245.png)
</figure>

<Callout type="important">
**Q. Urgent Modeスイッチが見えません。**
A. 管理者がUrgent Modeを許可しない決裁ルールを選択した場合、該当機能が表示されません。
</Callout>

#### 5. 要求情報入力

*  **Title**  : 要求タイトルを入力します。 
*  **Access Expiration Date**  : 要求権限の期限切れ日を入力します。基本値は管理者ページでDAC configurationsのMaximum Access Duration値に従います。 
*  **Reason for Request**  : アクセス権限を要求する理由を入力します。 

<figure data-layout="center" data-align="center">
![User &gt; Workflow &gt; Submit Request &gt; DB Access Request &gt; Request Summary](/user-manual/workflow/requesting-db-access/Screenshot-2025-08-26-at-12.24.44-AM.png)
<figcaption>
User &gt; Workflow &gt; Submit Request &gt; DB Access Request &gt; Request Summary
</figcaption>
</figure>

#### 6. 要求するDBコネクション選択および権限指定

* Request Summary領域内テーブルには現在QueryPieに登録されているDBコネクション目録が表示されます。 
    *  **Privilege Type**  : 特定DBコネクションに要求するPrivilege Typeを指定するとその値が表示されます。 
    *  **Current Privilege**  : 該当コネクションの現在権限を表示します。現在アクセス権限がない場合は空です。
    *  **Expiration Date**  : 現在該当コネクションに付与されている権限の期限切れ日を表示します。
* アクセス権限を要求するDBコネクションをチェックボックスで選択後下記二つの方法でPrivilege Typeを選択できます。
<figure data-layout="center" data-align="center">
![ドロップダウンを通じてコネクション別に指定](/user-manual/workflow/requesting-db-access/screenshot-20240801-191054.png)
<figcaption>
ドロップダウンを通じてコネクション別に指定
</figcaption>
</figure>
<figure data-layout="center" data-align="center">
![チェックボックスおよびApplyボタンを通じた一括適用](/user-manual/workflow/requesting-db-access/screenshot-20240801-191152.png)
<figcaption>
チェックボックスおよびApplyボタンを通じた一括適用
</figcaption>
</figure>
* 選択可能なPrivilege Typeは以下の通りです。 
    *  **Read/Write権限**  : 全体権限です。 
    *  **Read-Only権限**  : SELECTのみ可能な権限です。
    *  **その他権限**  : 管理者が追加で作成した権限で作成した権限がない場合は上記二つの権限のみ表示されます。 
* 決裁ルール指定および要求本文入力が完了したらページ下部の`Submit`ボタンを押して要求を上申します。
